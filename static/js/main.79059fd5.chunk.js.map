{"version":3,"sources":["contexts/userData.js","components/ManageData.jsx","services/auth.js","utils/hash.js","components/layout/main/Header/Header.jsx","components/common/Subtitle.jsx","components/layout/main/Header/AlbumHeader.jsx","utils/prettyMS.js","utils/getTotalLengthOfTracks.js","services/spotify/album.js","pages/Loading.jsx","components/common/FollowBtn.jsx","services/spotify/player.js","components/common/GreenRoundPlayBtn.jsx","components/common/playTools.jsx","components/layout/main/Contents.jsx","components/common/ListHeader.jsx","utils/spotifyHelper.js","components/common/CommafyArtists.jsx","components/common/List.jsx","services/spotify/artists.js","components/common/SectionHeader.jsx","components/common/CardGroup.jsx","components/common/PlaceHolderImg.jsx","components/common/Card.jsx","pages/Album.jsx","pages/NoMatch.jsx","services/generators.js","pages/see-alls/Discography.jsx","pages/see-alls/SeeAllRouteHandler.jsx","components/layout/main/PopularSongList.jsx","components/layout/main/SectionOfCards.jsx","components/layout/main/Header/ArtistHeader.jsx","pages/Artist.jsx","components/layout/main/Header/UserHeader.jsx","services/spotify/playlist.js","services/spotify/follow.js","pages/User/User.jsx","services/spotify/user.js","services/spotify/browse.js","pages/Home.jsx","services/general.js","components/layout/main/Header/PlaylistHeader.jsx","pages/Playlist.jsx","pages/Search/RecommendedSearch.jsx","pages/Search/SearchResult.jsx","services/spotify/Search.jsx","pages/Search/SearchPage.jsx","pages/Queue.jsx","pages/Collections/NoCollectionsSign.jsx","pages/Collections/AlbumLibrary.jsx","pages/Collections/ArtistsLibrary.jsx","pages/Collections/PlaylistLibrary.jsx","pages/Collections/Library.jsx","components/common/ScrollBar.jsx","components/common/Button.jsx","pages/NotLoginPage.jsx","components/layout/main/MainContent.jsx","components/layout/bottom/player/CurrentPlayingInfo.jsx","components/layout/bottom/player/Controls.jsx","components/common/Slider.jsx","components/layout/bottom/player/PlaybackBar.jsx","components/layout/bottom/player/ExtraControls.jsx","components/layout/bottom/BottomContainer.jsx","services/spotify/SDKInitializer.js","components/layout/left/SideBar.jsx","components/layout/left/PlaylistsSidebar.jsx","test/fixtures/userDataObj.js","components/layout/left/LeftContainer.jsx","contexts/__mocks__/userData.js","components/layout/top/CollectionsNav.jsx","components/layout/top/HistoryManager.jsx","components/layout/top/SearchBar.jsx","components/common/OverlayMenu.jsx","components/layout/top/UserDropdown.jsx","components/layout/top/TopContainer.jsx","App.js","reportWebVitals.js","index.js","utils/localStorageService.js","api/spotify.js"],"names":["UserDataContext","React","createContext","UserDataDispatchContext","UserDataReducer","state","action","type","data","payload","Error","concat","UserDataProvider","_ref","children","_useReducer","useReducer","_useReducer2","_slicedToArray","dispatch","_jsx","Provider","value","useUserDataState","context","useContext","undefined","ManageData","tokenObject","str","updateUserData","useUserDataDispatch","_useState","useState","_useState2","displayLoading","setDisplayLoading","hashCleaner","window","location","hash","includes","e","hashParams","r","q","substring","exec","decodeURIComponent","getHashParams","tokenLocalStorageService","setToken","Redirect","to","useEffect","getAccessToken","spotifyApi","get","then","res","catch","err","console","log","_jsxs","_Fragment","Container","styled","div","_templateObject","_taggedTemplateLiteral","BackgroundReflection","_templateObject2","Header","_ref$about","about","className","SubtitleStyled","p","Subititle","arrayOfText","map","text","i","ProfileImg","TextContent","_templateObject3","ArtistName","span","_templateObject4","AlbumHeader","subtitles","artists","forEach","artist","push","Link","id","name","releaseYear","release_date","split","tracksInfo","total_tracks","ms","hours","Math","floor","min","sec","prettyMS","tracks","items","reduce","accumulator","track","duration_ms","src","images","url","alt","display_name","height","width","toUpperCase","require","Loading","StyledBtn","button","FollowBtn","uri","play","body","context_uri","arguments","length","uris","offset","put","pause","setPlayerVolume","volumePercent","params","volume_percent","GreenRoundPlayBtn","onClick","MdPlayArrow","PlayBtnWrapper","PlayTools","showFollow","Contents","Album","TopIndicator","ListHeader","noAlbumInfo","getIdFromUri","getMMSSfromMilisec","minArray","shift","join","CommafyArtist","artistArray","ListSyled","li","isMini","AlbumImgWrapper","AlbumName","MainInfo","LastItem","_templateObject5","ClickSpace","_templateObject6","ArtistsContainer","_templateObject7","List","_ref2","trackData","_ref2$num","num","clickFunction","showArtist","testId","isHovered","setIsHovered","onMouseEnter","onMouseLeave","album","getArtistAlbums","include_groups","market","limit","getRelatedArtists","Title","h3","SeeAll","SectionHeader","seeAllLink","title","CardContainer","freeHeight","CardGroup","_ref2$freeHeight","PlaceHolderImg","AiOutlineUser","ImgContainer","ImgPlaceholder","ImgWrapper","isArtist","Name","h4","Subtitle","_templateObject8","LinkWrapper","_templateObject9","Card","onClickCallback","_ref2$subtitleTypes","showReleaseYear","subtitleTypes","capitalize","replace","w","c","owner","subs","key","playlist","description","typeName","content","album_type","subtitleType","albumId","useParams","albumData","setalbumData","_useState3","_useState4","moreAlbum","setMoreAlbum","NoMatch","getAllGenerator","apiGetter","callback","results","iterationData","getter","_regeneratorRuntime","mark","_callee","_loop","wrap","_context2","prev","next","before","isUsingBeforeOffset","_context","hasOwnProperty","cursors","stop","delegateYield","dataIterator","getAllGeneratorWithIdOffset","_callee2","_context3","dataIteratorWithIdOffset","Discography","albums","setAlbums","singles","setSingles","_useState5","_useState6","compilations","setCompilations","sortArray","albumFiltered","singleFiltered","compilationFiltered","el","single","compilation","SeeAllRouteHandler","toRender","dataType","SeeMoreBtn","PopularSongList","artistId","userMarket","country","topTracks","setTopTracks","numOfListToDisplay","setNumOfListToDisplay","SectionsOfCards","artistID","setData","datum","ArtistHeader","Artist","_useRouteMatch","useRouteMatch","path","artistData","setArtistData","relatedArtists","setRelatedArtists","appearsOn","setAppearsOn","_useState7","_useState8","isLoading","setIsLoading","Promise","all","arrayRes","Route","exact","UserHeader","playlists","followers","total","following","getCurrentUserPlaylists","getCurrentUserFollowed","after","User","currentUserData","followig","getUserData","_objectSpread","dataCol","filter","hideSubs","ContentContainer","Home","recentlyPlayedSongs","setrecentlyPlayedSongs","recentlyPlayedContexts","setRecentlyPlayedContexts","topArtist","setTopArtist","recomendedSongs","setRecomendedSongs","getRecentlyPlayed","item","queries","fn","getDataFromUris","indexOf","getUserTopArtists","seedArtists","splice","seedTracks","random","seed_artists","seed_tracks","h1","scaleFont","PlaylistHeader","isShouldUpdate","useRef","nameHeight","setNameHeight","current","document","querySelector","offsetHeight","LoadingList","Playlist","playlistId","playlistData","setPlaylistData","fields","additional_types","getPlaylist","getPlaylistItems","_toConsumableArray","position","RecommendedSearch","searchHistory","setSearchHistory","userData","searchHistoryLocalStorageService","getSearchHistory","obj","SearchResult","query","setTracks","setArtists","setPlaylists","searchSpotify","addToSearchHistory","userId","addItemToHistory","SearchPage","Switch","component","Warning","Queue","NoCollectionsSign","AlbumLibrary","userAlbums","setUserAlbums","getUserSavedAlbum","ArtistsLibrary","userArtists","setuserArtists","PlaylistLibrary","userPlaylists","setuserPlaylists","Library","scrollbarWidth","ScrollBar","onScrollCallback","setScrollbarWidth","scrollContainer","offsetWidth","clientWidth","ref","Scrollbars","renderThumbVertical","_ref3","style","props","_objectWithoutProperties","_excluded","renderTrackVertical","_ref4","_excluded2","autoHide","onScroll","ButtonStyled","isIcon","iconScale","isActive","isDisabled","Button","rest","href","NotLoginPage","MainContent","changeBackgroundOpacity","opacityValue","backgroundColor","scrollValue","currentTarget","scrollTop","element","elementSensor","getBoundingClientRect","top","left","right","padding","background","zIndex","stickify","Info","NameContainer","CurrentPlayingInfo","trackName","PlaybackControlWrapper","RepeatBtnWrapper","mode","CircleBtnWrapper","Controls","isPaused","isShuffled","repeatMode","_ref2$nextTracks","nextTracks","_ref2$prevTracks","prevTracks","BiShuffle","post","MdSkipPrevious","MdPause","MdSkipNext","repeat","IoIosRepeat","Wrapper","ProgressBarBg","ProgressBar","progress","Slider","endCallback","dragCalback","sliderState","setSliderState","isDrag","seekValue","currentElement","dragStartHandler","useCallback","pageX","offsetLeft","dragEndHandler","removeEventListener","onMouseDown","addEventListener","PlaybackBar","trackPosition","trackDuration","isPlaying","timestamp","progressTime","setProgressTime","intervalId","setInterval","clearInterval","positionMs","seekPosition","position_ms","VolumeControl","ExtraControls","deviceId","volumeLocalStorageService","getVolume","volumePercentage","setVolumePercentage","volumeCache","setvolumeCache","RiPlayList2Fill","setVolume","FiVolumeX","FiVolume1","FiVolume2","perc","Left","Middle","Right","BottomContainer","duration","track_window","current_track","device","playback","setPlayback","sdkIsAlreadyInit","setsdkIsAlreadyInit","setdeviceId","setID","device_ids","transferUsersPlayback","currentTrack","token","setId","onPlayerStateChange","waitForSpotifyWebPlaybackSDKToLoad","_waitForSpotifyWebPlaybackSDKToLoad","apply","_asyncToGenerator","abrupt","resolve","Spotify","onSpotifyWebPlaybackSDKReady","_yield$waitForSpotify","Player","player","sent","volume","getOAuthToken","cb","addListener","message","error","_ref5","_ref6","device_id","_ref7","connect","SDKInitializer","shuffle","paused","repeat_mode","previous_tracks","next_tracks","nav","LogoWrapper","Logo","LogoName","NavClickable","IconAndTextAligner","IconWrapper","LinkName","NavList","ul","Sidebar","pathname","useLocation","navs","icon","VscHome","IoIosSearch","viewBox","xmlns","d","fill","appHistory","useHistory","getStatusBasedOnPathname","RegExp","test","ImSpotify","ListItem","isAtive","ListContainer","PlaylistSidebar","premiumAccountUser","email","explicit_content","filter_enabled","filter_locked","external_urls","spotify","product","LeftContainer","NavItem","CollectionsNav","CircleButton","BackForwardBtnContainer","HistoryManager","goBack","goForward","keys","previousKey","currentKeyIndex","setCurrentKeyIndex","updateHistory","slice","listen","IoIosArrowBack","IoIosArrowForward","SearchInput","SearchBar","searchInputRef","isSearchEmpty","setisSearchEmpty","setQuery","placeholder","onInput","inputValue","maxLength","autoFocus","GrClose","OverlayMenu","list","link","Pill","Figure","figure","UserName","IconContainer","OverlayStyled","UserDropDown","showList","setShowList","userIsLogout","setuserIsLogout","pillRef","clearToken","reload","IoMdArrowDropdown","LeftContent","MiddleContent","TopContainer","isUserAuthenticated","App","haveUserData","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","HashRouter","getElementById","tokenObj","localStorage","setItem","access_token","refresh_token","setAccessToken","getItem","getRefreshToken","removeItem","_getSearchHistory","JSON","parse","oldData","pop","stringify","clearSearchHistory","axios","create","baseURL","headers","Accept","interceptors","request","use","config","common","reject","response","originalRequest","refreshToken","status","_retry","_x"],"mappings":"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","file":"static/js/main.79059fd5.chunk.js","sourcesContent":["import React, { useReducer, useContext } from \"react\";\n\nconst UserDataContext = React.createContext();\nconst UserDataDispatchContext = React.createContext();\n\nconst UserDataReducer = (state, action) => {\n  switch (action.type) {\n    case \"USER_LOGGED_IN\": {\n      return { data: action.payload };\n    }\n    case \"USER_LOGGED_OUT\": {\n      return { data: null };\n    }\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`);\n    }\n  }\n};\n\nexport const UserDataProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(UserDataReducer, { data: null });\n\n  return (\n    <UserDataContext.Provider value={state}>\n      <UserDataDispatchContext.Provider value={dispatch}>\n        {children}\n      </UserDataDispatchContext.Provider>\n    </UserDataContext.Provider>\n  );\n};\n\nexport const useUserDataState = () => {\n  const context = useContext(UserDataContext);\n  if (context === undefined) {\n    throw new Error(\"useUserDataState must be used within a Provider\");\n  }\n  return context;\n};\n\nexport const useUserDataDispatch = () => {\n  const context = useContext(UserDataDispatchContext);\n  if (context === undefined) {\n    throw new Error(\"useUserDataDispatch must be used within a Provider\");\n  }\n  return context;\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { useUserDataDispatch, useUserDataState } from \"../contexts/userData\";\nimport { loginUser } from \"../services/auth\";\nimport { checkHashContains, getHashParams } from \"../utils/hash\";\nimport { spotifyApi } from \"../api/spotify\";\nimport { tokenLocalStorageService } from \"../utils/localStorageService\";\n\nexport const ManageData = ({ children }) => {\n  const updateUserData = useUserDataDispatch();\n  const [displayLoading, setDisplayLoading] = useState(true);\n\n  // translate hash to object data and store to localStorage\n  let hashCleaner = \"\";\n  if (checkHashContains(\"access_token\")) {\n    loginUser(getHashParams(window.location.hash));\n    hashCleaner = <Redirect to=\"/\" />;\n  }\n\n  let { data } = useUserDataState();\n  useEffect(() => {\n    if (tokenLocalStorageService.getAccessToken()) {\n      if (data === null) {\n        spotifyApi\n          .get(\"/me\")\n          .then((res) => {\n            updateUserData({ type: \"USER_LOGGED_IN\", payload: res.data });\n            setDisplayLoading(false);\n          })\n          .catch((err) => console.log(err));\n      }\n    } else {\n      setDisplayLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <>\n      {hashCleaner}\n      {displayLoading ? <div>Loading..</div> : children}\n    </>\n  );\n};\n","import { tokenLocalStorageService } from \"../utils/localStorageService\";\n\nexport const loginUser = (tokenObject) => {\n  tokenLocalStorageService.setToken(tokenObject);\n};\n\nexport const logoutUser = () => {\n  tokenLocalStorageService.clearToken();\n  document.location.reload();\n};\n","export const checkHashContains = (str) => window.location.hash.includes(str);\n\nexport const getHashParams = (hash) => {\n  const hashParams = {};\n  var e,\n    r = /([^&;=]+)=?([^&;]*)/g,\n    q = hash.substring(1);\n  while ((e = r.exec(q))) {\n    hashParams[e[1]] = decodeURIComponent(e[2]);\n  }\n  return hashParams;\n};\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\n\nconst Container = styled.div`\n  position: relative;\n\n  .Header-content {\n    display: flex;\n    align-items: flex-end;\n    padding: 34px;\n    background-color: rgb(83, 83, 83);\n    background-image: linear-gradient(transparent, rgba(0, 0, 0, 0.5));\n  }\n`;\n\nconst BackgroundReflection = styled.div`\n  height: 232px;\n  width: 100%;\n  position: absolute;\n  background-color: rgb(83, 83, 83);\n  background-image: linear-gradient(rgba(0, 0, 0, 0.6), #121212);\n  z-index: -1;\n  top: 100%;\n`;\n\nexport const Header = ({ about = \"user\", children }) => {\n  return (\n    <Container about={about}>\n      <div className=\"Header-content\">{children}</div>\n      <BackgroundReflection />\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\n\nconst SubtitleStyled = styled.p`\n  font-size: 0.84em;\n  > span {\n    color: hsla(0, 0%, 100%, 0.7);\n  }\n  > span:not(:first-of-type):before {\n    content: \"\";\n    margin: 0px 4px;\n  }\n`;\n\nexport const Subititle = ({ arrayOfText }) => {\n  return (\n    <SubtitleStyled>\n      {arrayOfText.map((text, i) => (\n        <span key={i}>{text}</span>\n      ))}\n    </SubtitleStyled>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { getTotalLengthOfTracks } from \"../../../../utils/getTotalLengthOfTracks\";\nimport { prettyMS } from \"../../../../utils/prettyMS\";\nimport { Subititle } from \"../../../common/Subtitle\";\n\nconst ProfileImg = styled.div`\n  overflow: hidden;\n  display: flex;\n  height: 232px;\n  width: 232px;\n  margin-right: 24px;\n  box-shadow: 0 4px 60px rgba(0, 0, 0, 0.5);\n  justify-content: center;\n  > img {\n    object-fit: cover;\n  }\n`;\n\nconst TextContent = styled.div`\n  z-index: 3;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n\n  .Header-about-title {\n    font-size: 0.75em;\n    color: hsla(0, 0%, 100%, 0.7);\n    letter-spacing: 1px;\n  }\n  .Header-display-name {\n    font-size: 5.2em;\n    font-weight: 900;\n    word-spacing: 8px;\n    letter-spacing: -3px;\n  }\n`;\nconst Container = styled.div`\n  display: flex;\n  padding-top: 40px;\n`;\n\nconst ArtistName = styled.span`\n  &:hover {\n    text-decoration: underline;\n  }\n`;\nexport const AlbumHeader = ({ data }) => {\n  const subtitles = [];\n\n  data.artists.forEach((artist) => {\n    subtitles.push(\n      <Link to={\"/artist/\" + artist.id}>\n        <ArtistName>{artist.name}</ArtistName>\n      </Link>\n    );\n  });\n\n  const releaseYear = data.release_date.split(\"-\")[0];\n  let tracksInfo = \"\";\n\n  tracksInfo +=\n    data.total_tracks + \" song\" + (data.total_tracks > 1 ? \"s\" : \"\") + \", \";\n  tracksInfo += prettyMS(getTotalLengthOfTracks(data.tracks.items), {});\n\n  subtitles.push(releaseYear);\n  subtitles.push(tracksInfo);\n  return (\n    <Container>\n      <ProfileImg>\n        <img\n          src={data.images[0].url}\n          alt={data.display_name + \"'s profile pic\"}\n          height=\"100%\"\n          width=\"auto\"\n          data-testid=\"album-cover-img\"\n        />\n      </ProfileImg>\n      <TextContent>\n        <h2 className=\"Header-about-title\">{data.type.toUpperCase()}</h2>\n        <h1 className=\"Header-display-name\">{data.name}</h1>\n        <Subititle arrayOfText={subtitles} />\n      </TextContent>\n    </Container>\n  );\n};\n","export const prettyMS = (ms) => {\n  let str = \"\";\n  //HOURS\n\n  if (ms > 0) {\n    const hours = Math.floor(ms / 3.6e6);\n    ms = ms - hours * 3.6e6;\n    if (hours > 0) {\n      str += `${hours} hours `;\n    }\n  }\n  if (ms > 0) {\n    const min = Math.floor(ms / 60000);\n    ms = ms - min * 60000;\n    if (min > 0) {\n      str += `${min} min `;\n    }\n  }\n  if (ms > 0) {\n    const sec = Math.floor(ms / 1000);\n    if (sec > 0) {\n      str += `${sec} sec`;\n    }\n  }\n  return str;\n};\n","export const getTotalLengthOfTracks = (arrayOfTracks) =>\n  arrayOfTracks.reduce(\n    (accumulator, track) => accumulator + track.duration_ms,\n    0\n  );\n","const { spotifyApi } = require(\"../../api/spotify\");\n\nexport const getAlbum = (id) => spotifyApi.get(\"/albums/\" + id);\n\nexport const getUserSavedAlbum = (limit, offset) =>\n  spotifyApi.get(\"/me/albums\", {\n    params: {\n      limit,\n      offset,\n    },\n  });\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\n\nconst Container = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\nexport const Loading = () => {\n  return (\n    <Container data-testid=\"loading-page\">\n      <div>Loading...</div>\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\n\nconst StyledBtn = styled.button`\n  padding: 7px 16px;\n  color: #fff;\n  border: 1px solid hsla(0, 0%, 100%, 0.3);\n  font-size: 0.71em;\n  letter-spacing: 1.4px;\n  font-weight: 600;\n  border-radius: 4px;\n  &:hover {\n    border-color: hsla(0, 0%, 100%, 0.8);\n  }\n`;\n\nexport const FollowBtn = ({ uri }) => {\n  return <StyledBtn aria-label=\"follow-button\">FOLLOW</StyledBtn>;\n};\n","import { spotifyApi } from \"../../api/spotify\";\n\nexport const play = (context_uri = null, uris = null, offset) => {\n  const body = {\n    context_uri,\n    uris,\n    offset,\n  };\n\n  spotifyApi.put(\"/me/player/play\", body);\n};\n\nexport const pause = () => spotifyApi.put(\"/me/player/pause\");\n\nexport const previous = () => spotifyApi.post(\"/me/player/previous\");\n\nexport const next = () => spotifyApi.post(\"/me/player/next\");\n\nexport const seek = (positionMs) => {\n  console.log(\"seek is called\");\n  spotifyApi.put(\"/me/player/seek\", null, {\n    params: { position_ms: positionMs },\n  });\n};\nexport const setPlayerVolume = (volumePercent) => {\n  console.log(\"volume setter has been called\");\n\n  spotifyApi.put(\"/me/player/volume\", null, {\n    params: { volume_percent: volumePercent },\n  });\n};\nexport const shuffle = (state) => {\n  spotifyApi.put(\"/me/player/shuffle\", null, {\n    params: { state },\n  });\n};\nexport const repeat = (num) => {\n  let state;\n\n  if (num === 3) {\n    num = 0;\n  }\n\n  const repeatMode = [\"off\", \"context\", \"track\"];\n\n  state = repeatMode[num];\n\n  spotifyApi.put(\"/me/player/repeat\", null, {\n    params: { state },\n  });\n};\n\nexport const getCurrentPlayback = () => spotifyApi.get(\"me/player\");\nexport const getAvailableDevices = () => spotifyApi.get(\"/me/player/devices\");\n\nexport const transferUsersPlayback = (device_ids, play = false) =>\n  spotifyApi.put(\"me/player\", {\n    device_ids,\n    play,\n  });\n\nexport const getRecentlyPlayed = (limit, before = null, after = null) =>\n  spotifyApi.get(\"me/player/recently-played\", {\n    params: {\n      limit,\n      after,\n      before,\n    },\n  });\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { MdPlayArrow } from \"react-icons/md\";\nimport { play } from \"../../services/spotify/player\";\n\nconst Container = styled.div`\n  width: 1em;\n  height: 1em;\n  border-radius: 50%;\n  background-color: #1db954;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  &:hover {\n    transform: scale(1.06);\n  }\n  > * {\n    font-size: 0.68em;\n  }\n`;\n\nexport const GreenRoundPlayBtn = ({ uri }) => {\n  return (\n    <Container onClick={() => play(uri)}>\n      <MdPlayArrow />\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { FollowBtn } from \"./FollowBtn\";\nimport { GreenRoundPlayBtn } from \"./GreenRoundPlayBtn\";\n\nconst Container = styled.div`\n  height: 84px;\n  display: flex;\n  align-items: center;\n\n  > button:first-of-type {\n    margin-right: 24px;\n  }\n  margin-bottom: 16px;\n`;\nconst PlayBtnWrapper = styled.div`\n  margin-right: 32px;\n\n  > * {\n    font-size: 64px;\n  }\n`;\n\nexport const PlayTools = ({ uri, showFollow }) => {\n  return (\n    <Container>\n      <PlayBtnWrapper>\n        <GreenRoundPlayBtn uri={uri} />\n      </PlayBtnWrapper>\n      {showFollow && <FollowBtn />}\n    </Container>\n  );\n};\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\n\nconst Container = styled.div`\n  padding: 24px 32px;\n`;\n\nexport const Contents = ({ children }) => {\n  return <Container>{children}</Container>;\n};\n","import styled from \"@emotion/styled\";\n\nconst Container = styled.div`\n  display: grid;\n  grid-template-columns: 24px 4fr 2fr [last] minmax(110px, 1fr);\n  border-bottom: 1px solid hsla(0, 0%, 100%, 0.1);\n  padding: 6px 24px;\n  grid-gap: 16px;\n  > * {\n    color: #b3b3b3;\n  }\n  > *:last-of-type {\n    text-align: right;\n    grid-column: last;\n  }\n  > *:first-of-type {\n    text-align: center;\n  }\n`;\n\nconst Album = styled.div`\n  text-align: left;\n`;\n\nconst TopIndicator = styled.div`\n  margin: 0;\n  margin-bottom: 20px;\n  padding: 0;\n  height: 35px;\n`;\nexport const ListHeader = ({ noAlbumInfo }) => {\n  return (\n    <>\n      <TopIndicator className=\"sticky-sensor\">\n        <Container className={\"sticky-list-header\"}>\n          <div>#</div>\n          <div>TITLE</div>\n\n          <Album>{!noAlbumInfo && \"ALBUM\"}</Album>\n          <div>Time</div>\n        </Container>\n      </TopIndicator>\n    </>\n  );\n};\n","export const getIdFromUri = (url) => url.split(\":\")[2];\n\nexport const getMMSSfromMilisec = (ms) => {\n  let minArray = (ms / 60000 + \"\").split(\".\");\n  const min = minArray[0];\n  let sec = \"00\";\n\n  if (minArray.length === 2) {\n    sec = 100 + Math.floor(60 * (\".\" + minArray[1]));\n    sec += \"\";\n    sec = sec.split(\"\");\n    sec.shift();\n    sec = sec.join(\"\");\n  }\n\n  return min + \":\" + sec;\n};\n","import { Link } from \"react-router-dom\";\nimport React from \"react\";\nimport { getIdFromUri } from \"../../utils/spotifyHelper\";\nimport styled from \"@emotion/styled\";\n\nconst ArtistName = styled.span`\n  font-weight: 400;\n  color: #b3b3b3;\n  line-height: 0.7em;\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nexport const CommafyArtist = ({ artistArray }) => {\n  return (\n    <>\n      {artistArray.map((artist, i) => (\n        <Link to={\"/artist/\" + getIdFromUri(artist.uri)} key={i}>\n          {i > 0 && <span>, </span>}\n          <ArtistName>{artist.name}</ArtistName>\n        </Link>\n      ))}\n    </>\n  );\n};\n","import React, { useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { MdPlayArrow } from \"react-icons/md\";\nimport { getMMSSfromMilisec } from \"../../utils/spotifyHelper\";\nimport { play } from \"../../services/spotify/player\";\nimport { Link } from \"react-router-dom\";\nimport { CommafyArtist } from \"./CommafyArtists\";\nconst ListSyled = styled.li`\n  display: grid;\n  grid-template-columns: 24px [main]4fr 2fr [last] minmax(110px, 1fr);\n\n  grid-gap: 16px;\n  height: 54px;\n  border-radius: 4px;\n  padding: 0 24px;\n  position: relative;\n  * {\n    color: #b3b3b3;\n  }\n  > *:last-of-type {\n    justify-content: flex-end;\n  }\n  &:hover {\n    background-color: hsla(0, 0%, 100%, 0.1);\n    * {\n      color: #fff !important;\n    }\n  }\n  > * {\n    display: flex;\n    align-items: center;\n  }\n  .List-track-num {\n    display: flex;\n    text-align: center;\n    justify-content: center;\n    svg {\n      width: 24px;\n      height: 24px;\n    }\n  }\n  a:hover {\n    text-decoration: underline;\n  }\n  ${({ isMini }) =>\n    isMini &&\n    `\n  grid-template-columns: [main] 4fr [last] minmax(110px, 1fr);\n  padding: 0 6px;\n  `}\n`;\n\nconst AlbumImgWrapper = styled.div`\n  width: 40px;\n  height: 40px;\n  margin-right: 16px;\n  position: relative;\n  > img {\n    width: 100%;\n  }\n  .List-play-icon-album-cover {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    font-size: 1.5em;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: rgba(0, 0, 0, 0.5);\n  }\n`;\nconst AlbumName = styled.span`\n  font-size: 0.875em;\n  position: relative;\n  z-index: 6;\n`;\nconst MainInfo = styled.div`\n  grid-column: main;\n\n  .List-track-name {\n    color: #fff;\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n`;\nconst LastItem = styled.div`\n  grid-column: last;\n`;\nconst ClickSpace = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 2;\n`;\nconst ArtistsContainer = styled.div`\n  font-size: 0.8em;\n  position: relative;\n  z-index: 5;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\nexport const List = ({\n  trackData,\n  num = null,\n  noAlbumInfo,\n  clickFunction,\n  isMini, // when we need less item to show on the list\n  showArtist,\n  testId,\n}) => {\n  const [isHovered, setIsHovered] = useState(false);\n\n  return (\n    <ListSyled\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      isMini={isMini}\n      data-testid={testId}\n    >\n      {!clickFunction ? (\n        <ClickSpace onClick={() => play(null, [trackData.uri])} />\n      ) : (\n        <ClickSpace onClick={clickFunction} />\n      )}\n      {!isMini && (\n        <div className=\"List-track-num\">\n          {isHovered ? <MdPlayArrow /> : <span>{num + 1}</span>}\n        </div>\n      )}\n      <MainInfo>\n        {!noAlbumInfo && (\n          <AlbumImgWrapper>\n            <img\n              src={trackData.album.images[2].url}\n              alt={trackData.album.name}\n            />\n            {isHovered && isMini && (\n              <div className=\"List-play-icon-album-cover\">\n                <MdPlayArrow />\n              </div>\n            )}\n          </AlbumImgWrapper>\n        )}\n        <div>\n          <span className=\"List-track-name\" data-testid={testId + \"-name\"}>\n            {trackData.name}\n          </span>\n          {(isMini || showArtist) && (\n            <ArtistsContainer>\n              <CommafyArtist artistArray={trackData.artists} />\n            </ArtistsContainer>\n          )}\n        </div>\n      </MainInfo>\n      {!noAlbumInfo && !isMini && (\n        <div>\n          <AlbumName>\n            <Link to={\"/album/\" + trackData.album.id}>\n              {trackData.album.name}\n            </Link>\n          </AlbumName>\n        </div>\n      )}\n      {/* <Coki>{trackData.name}</Coki> */}\n      {/* <Poki>{trackData.name}</Poki> */}\n      <LastItem>{getMMSSfromMilisec(trackData.duration_ms)}</LastItem>\n    </ListSyled>\n  );\n};\n","import { spotifyApi } from \"../../api/spotify\";\n\nexport const getArtist = (id) => spotifyApi.get(\"/artists/\" + id);\n\nexport const getArtistAlbums = (\n  id,\n  include_groups = null,\n  market = null,\n  limit = null,\n  offset = null\n) =>\n  spotifyApi.get(\"/artists/\" + id + \"/albums\", {\n    params: {\n      market,\n      include_groups,\n      limit,\n      offset,\n    },\n  });\n\nexport const getArtistTopTracks = (id, market) =>\n  spotifyApi.get(\"/artists/\" + id + \"/top-tracks\", {\n    params: {\n      market,\n    },\n  });\n\nexport const getRelatedArtists = (id) =>\n  spotifyApi.get(\"/artists/\" + id + \"/related-artists\");\n\nexport const getUserTopArtists = (limit, offset = null) =>\n  spotifyApi.get(\"/me/top/artists\", {\n    params: {\n      limit,\n      offset,\n    },\n  });\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nconst Title = styled.h3`\n  line-height: 33px;\n  display: inline;\n  font-size: 1.36em;\n`;\nconst SeeAll = styled.span`\n  font-size: 0.75em;\n  font-weight: 700;\n  color: hsla(0, 0%, 100%, 0.6);\n  align-self: flex-end;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  margin-bottom: 16px;\n  > a > *:hover {\n    text-decoration: underline;\n  }\n  > *:first-of-type {\n    flex: 2;\n  }\n  > *:last-of-type {\n    display: flex;\n  }\n`;\n\nexport const SectionHeader = ({ seeAllLink, title }) => {\n  return (\n    <Header>\n      {!!seeAllLink ? (\n        <>\n          <Link to={seeAllLink}>\n            <Title>{title}</Title>\n          </Link>\n          <Link to={seeAllLink}>\n            <SeeAll>SEE ALL</SeeAll>\n          </Link>\n        </>\n      ) : (\n        <Title>{title}</Title>\n      )}\n    </Header>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { SectionHeader } from \"./SectionHeader\";\n\nconst Container = styled.div`\n  &:not(:first-of-type) {\n    margin-top: 40px;\n  }\n`;\n\nconst CardContainer = styled.div`\n  display: grid;\n  grid-gap: 24px;\n  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\n  grid-template-rows: 1fr;\n  overflow: hidden;\n  grid-auto-rows: auto;\n  ${({ freeHeight }) =>\n    !freeHeight &&\n    `\n    max-height: 261px;\n  `}\n`;\n\nexport const CardGroup = ({\n  children,\n  title,\n  seeAllLink,\n  freeHeight = false,\n}) => {\n  return (\n    <Container>\n      <SectionHeader title={title} seeAllLink={seeAllLink} />\n      <CardContainer freeHeight={freeHeight}>{children}</CardContainer>\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { AiOutlineUser } from \"react-icons/ai\";\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #b3b3b3;\n  > * {\n    width: 76%;\n    height: 76%;\n  }\n`;\nexport const PlaceHolderImg = ({ type }) => {\n  return (\n    <Container>\n      <AiOutlineUser />\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { CommafyArtist } from \"./CommafyArtists\";\nimport { GreenRoundPlayBtn } from \"./GreenRoundPlayBtn\";\nimport { PlaceHolderImg } from \"./PlaceHolderImg\";\n\nconst Container = styled.div`\n  padding: 16px;\n  background: #181818;\n  position: relative;\n  transition: background-color 0.3s ease;\n  border-radius: 4px;\n  min-height: 260px;\n  &:hover {\n    background-color: #282828;\n  }\n  &:hover {\n    .play-button-hover {\n      bottom: 8px;\n      opacity: 1;\n    }\n  }\n`;\nconst ImgContainer = styled.div`\n  width: 100%;\n  position: relative;\n  border-radius: 4px;\n`;\nconst ImgPlaceholder = styled.div`\n  width: 100%;\n  height: 0;\n  padding-top: 100%;\n`;\nconst ImgWrapper = styled.div`\n  width: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n\n  ${({ isArtist }) =>\n    isArtist === \"artist\" &&\n    `\nborder-radius: 100%;\n`}\n  > * {\n    width: 100%;\n  }\n`;\nconst TextContent = styled.div`\n  margin-top: 16px;\n`;\n\nconst Name = styled.h4`\n  font-size: 0.94em;\n  width: 150px;\n  font-weight: 600;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  margin-bottom: 4px;\n`;\nconst Subtitle = styled.div`\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 17px !important;\n  font-weight: 400;\n\n  * {\n    font-size: 13px;\n    font-weight: 400;\n    color: #b3b3b3;\n    white-space: normal;\n  }\n  a {\n    position: relative;\n    z-index: 4;\n  }\n  > *:not(:first-of-type):before {\n    content: \"\";\n    margin: 0px 4px;\n  }\n`;\n\nconst PlayBtnWrapper = styled.div`\n  position: absolute;\n  bottom: 0px;\n  right: 8px;\n  z-index: 4;\n  width: 40px;\n  height: 40px;\n  transition: all 0.3s ease;\n  opacity: 0;\n  box-shadow: 0 8px 8px rgba(0, 0, 0, 0.3);\n  border-radius: 50%;\n  > * {\n    font-size: 40px;\n  }\n`;\nconst LinkWrapper = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  a {\n    z-index: 3;\n    position: absolute;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n  }\n`;\nexport const Card = ({\n  data,\n  onClickCallback,\n  testId,\n  showReleaseYear,\n  subtitleTypes = [\"typeName\"],\n}) => {\n  const capitalize = (str) =>\n    str.replace(/\\w\\S*/g, (w) => w.replace(/^\\w/, (c) => c.toUpperCase()));\n  const { type, owner } = data;\n\n  const subs = {\n    artists: (key) => (\n      <span key={key}>\n        <CommafyArtist artistArray={data.artists} />\n      </span>\n    ),\n    releaseYear: (key) => (\n      <span key={key}>{data.release_date.split(\"-\")[0]}</span>\n    ),\n    playlist: (key) => (\n      <span key={key}>\n        {!!data.description.length\n          ? data.description\n          : \"By \" + owner.display_name}\n      </span>\n    ),\n    typeName: getCapitalizedTypeName,\n  };\n\n  function getCapitalizedTypeName(key) {\n    let content;\n\n    if (type === \"album\" && data.album_type === \"single\") {\n      if (data.total_tracks >= 3) {\n        content = \"EP\";\n      } else {\n        content = capitalize(data.album_type);\n      }\n    } else {\n      content = capitalize(type);\n    }\n\n    return <span key={key}>{content}</span>;\n  }\n\n  return (\n    <Container data-testid={testId}>\n      <LinkWrapper onClick={onClickCallback}>\n        <Link to={`/${type}/${data.id}`} />\n      </LinkWrapper>\n\n      <ImgContainer>\n        <ImgPlaceholder />\n        <ImgWrapper isArtist={type}>\n          {!data.images.length ? (\n            <PlaceHolderImg type={data.type} />\n          ) : (\n            <img\n              src={\n                data.images.length > 1 ? data.images[0].url : data.images[0].url\n              }\n              alt={data.name}\n            />\n          )}\n        </ImgWrapper>\n        <PlayBtnWrapper className=\"play-button-hover\">\n          <GreenRoundPlayBtn uri={data.uri} />\n        </PlayBtnWrapper>\n      </ImgContainer>\n\n      <TextContent>\n        <Name>{data.name}</Name>\n        <Subtitle>\n          {subtitleTypes.map((subtitleType, i) => subs[subtitleType](i))}\n        </Subtitle>\n      </TextContent>\n    </Container>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Header } from \"../components/layout/main/Header/Header\";\nimport { AlbumHeader } from \"../components/layout/main/Header/AlbumHeader\";\nimport { getAlbum } from \"../services/spotify/album\";\nimport { Loading } from \"./Loading\";\nimport { PlayTools } from \"../components/common/playTools\";\nimport { Contents } from \"../components/layout/main/Contents\";\nimport { ListHeader } from \"../components/common/ListHeader\";\nimport { List } from \"../components/common/List\";\nimport { getArtistAlbums } from \"../services/spotify/artists\";\nimport { CardGroup } from \"../components/common/CardGroup\";\nimport { Card } from \"../components/common/Card\";\n\nexport const Album = () => {\n  const albumId = useParams().id;\n  const [albumData, setalbumData] = useState(null);\n  const [moreAlbum, setMoreAlbum] = useState(null);\n  useEffect(() => {\n    getAlbum(albumId).then((res) => {\n      setalbumData(res.data);\n    });\n  }, [albumId]);\n\n  useEffect(() => {\n    if (!!albumData) {\n      getArtistAlbums(\n        albumData.artists[0].id,\n        \"album,single\",\n        \"my\",\n        9 // the list will stay 8 when we exclude current album\n      ).then((res) => {\n        setMoreAlbum(res.data.items);\n      });\n    }\n  }, [albumData]);\n\n  return (\n    <>\n      {!albumData ? (\n        <Loading />\n      ) : (\n        <div>\n          <Header>\n            <AlbumHeader data={albumData} />\n          </Header>\n          <Contents>\n            <PlayTools uri={albumData.uri} />\n            <ListHeader noAlbumInfo />\n            {albumData.tracks.items.map((track, i) => (\n              <List\n                trackData={track}\n                num={i}\n                noAlbumInfo\n                key={i}\n                testId=\"album-track\"\n              />\n            ))}\n            {!!moreAlbum && (\n              <CardGroup title={\"More by \" + albumData.artists[0].name}>\n                {moreAlbum.map(\n                  (album, i) =>\n                    album.id !== albumId && ( // exclude current album\n                      <Card\n                        data={album}\n                        type=\"album\"\n                        key={i}\n                        testId=\"more-by-album\"\n                        showReleaseYear\n                        subtitleTypes={[\"releaseYear\"]}\n                      />\n                    )\n                )}\n              </CardGroup>\n            )}\n          </Contents>\n        </div>\n      )}\n    </>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\n\nconst Container = styled.div`\n  background: linear-gradient(45deg, #8c1932, #ff6437 60%);\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  p {\n    font-size: 2em;\n    font-weight: 600;\n    margin-left: 150px;\n  }\n`;\n\nexport const NoMatch = () => {\n  return (\n    <Container>\n      <p>Sorry, couldn't find that.</p>\n    </Container>\n  );\n};\n","export const getAllGenerator = (\n  apiGetter,\n  callback,\n  results = [],\n  iterationData = null,\n  firstOffset = 0,\n  limit = 50\n) => {\n  if (!iterationData) {\n    iterationData = dataIterator(apiGetter, firstOffset, limit);\n  }\n  const next = iterationData.next();\n\n  next.value.then((data) => {\n    if (data) {\n      results = results.concat(data);\n      getAllGenerator(apiGetter, callback, results, iterationData);\n    } else {\n      callback(results);\n    }\n  });\n};\n\nfunction* dataIterator(getter, offset = 0, limit = 50) {\n  while (true) {\n    let before = null;\n    let isUsingBeforeOffset = false;\n    yield getter(offset, limit).then((res) => {\n      const { data } = res;\n\n      if (data.hasOwnProperty(\"cursors\")) {\n        isUsingBeforeOffset = true;\n        if (!!data.cursors) {\n          before = data.cursors.before;\n        }\n      }\n      if (!!data.items.length) {\n        return data.items;\n      } else {\n        return null;\n      }\n    });\n    // because some api use \"before\" and not offset\n    if (isUsingBeforeOffset) {\n      offset = before;\n    } else {\n      offset += limit;\n    }\n  }\n}\n\nexport const getAllGeneratorWithIdOffset = (\n  apiGetter,\n  callback,\n  results = [],\n  iterationData = null,\n  firstIdOffset = null,\n  limit = 50\n) => {\n  if (!iterationData) {\n    iterationData = dataIteratorWithIdOffset(apiGetter, firstIdOffset, limit);\n  }\n  const next = iterationData.next();\n\n  next.value.then((data) => {\n    if (data) {\n      results = results.concat(data);\n      getAllGenerator(apiGetter, callback, results, iterationData);\n    } else {\n      callback(results);\n    }\n  });\n};\n\nfunction* dataIteratorWithIdOffset(getter, offset = null, limit = 50) {\n  let id;\n  while (true) {\n    // eslint-disable-next-line no-loop-func\n    yield getter(offset, limit).then((res) => {\n      const { data } = res;\n\n      if (!!data.artists.items.length) {\n        id = data.artists.items[data.artists.items.length - 1].id;\n        return data.artists.items;\n      } else {\n        return null;\n      }\n    });\n\n    offset = id;\n  }\n}\n","import React, { useEffect, useState } from \"react\";\nimport { Card } from \"../../components/common/Card\";\nimport { CardGroup } from \"../../components/common/CardGroup\";\nimport { getAllGenerator } from \"../../services/generators\";\nimport { getArtistAlbums } from \"../../services/spotify/artists\";\n\nexport const Discography = ({ id }) => {\n  const [albums, setAlbums] = useState([]);\n  const [singles, setSingles] = useState([]);\n  const [compilations, setCompilations] = useState([]);\n\n  function sortArray(data) {\n    let albumFiltered = [];\n    let singleFiltered = [];\n    let compilationFiltered = [];\n\n    data.forEach((el) => {\n      if (el.album_type === \"album\") {\n        albumFiltered.push(el);\n      } else if (el.album_type === \"single\") {\n        singleFiltered.push(el);\n      } else if (el.album_type === \"compilation\") {\n        compilationFiltered.push(el);\n      }\n    });\n    setAlbums(albumFiltered);\n    setSingles(singleFiltered);\n    setCompilations(compilationFiltered);\n  }\n  useEffect(() => {\n    getAllGenerator(\n      (offset, limit) =>\n        getArtistAlbums(id, \"album,single,compilation\", \"My\", limit, offset),\n      sortArray\n    );\n  }, [id]);\n\n  return (\n    <div>\n      {!!albums.length && (\n        <CardGroup title=\"Albums\" freeHeight>\n          {albums.map((album, i) => (\n            <Card data={album} type=\"album\" key={i} />\n          ))}\n        </CardGroup>\n      )}\n      {!!singles.length && (\n        <CardGroup title=\"Singles and EPs\" freeHeight>\n          {singles.map((single, i) => (\n            <Card data={single} type=\"album\" key={i} />\n          ))}\n        </CardGroup>\n      )}\n      {!!compilations.length && (\n        <CardGroup title=\"Compilations\" freeHeight>\n          {compilations.map((compilation, i) => (\n            <Card data={compilation} type=\"album\" key={i} />\n          ))}\n        </CardGroup>\n      )}\n    </div>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { NoMatch } from \"../NoMatch\";\nimport { Discography } from \"./Discography\";\n\nconst SeeAll = styled.div`\n  padding: 58px 32px 32px;\n`;\n\nexport const SeeAllRouteHandler = ({ id }) => {\n  const dataType = useParams().dataType;\n\n  let toRender;\n\n  switch (dataType) {\n    case \"discography\":\n      toRender = <Discography id={id} />;\n      break;\n    default:\n      toRender = <NoMatch />;\n  }\n\n  return <SeeAll>{toRender}</SeeAll>;\n};\n","import styled from \"@emotion/styled\";\nimport React, { useEffect, useState } from \"react\";\nimport { useUserDataState } from \"../../../contexts/userData\";\nimport { getArtistTopTracks } from \"../../../services/spotify/artists\";\n\nimport { List } from \"../../common/List\";\n\nconst Container = styled.div``;\nconst SeeMoreBtn = styled.button`\n  margin: 24px;\n  font-size: 0.74em;\n  font-weight: 600;\n  color: #b3b3b3;\n  letter-spacing: 2px;\n  &:hover {\n    color: #fff;\n  }\n`;\n\nexport const PopularSongList = ({ artistId }) => {\n  const userMarket = useUserDataState().data.country;\n  const [topTracks, setTopTracks] = useState([]);\n  const [numOfListToDisplay, setNumOfListToDisplay] = useState(5);\n\n  useEffect(() => {\n    getArtistTopTracks(artistId, userMarket).then((res) => {\n      setTopTracks(res.data.tracks);\n    });\n  }, [artistId, userMarket]);\n  return (\n    <Container>\n      <h2>Popular</h2>\n      <ul>\n        {topTracks.map(\n          (track, i) =>\n            i < numOfListToDisplay && (\n              <List\n                trackData={track}\n                num={i}\n                key={i}\n                testId=\"popular-track-list-item\"\n              />\n            )\n        )}\n      </ul>\n      <SeeMoreBtn\n        onClick={() => {\n          if (numOfListToDisplay === 5) {\n            setNumOfListToDisplay(10);\n          } else {\n            setNumOfListToDisplay(5);\n          }\n        }}\n        aria-label=\"see more popular songs\"\n        data-testid=\"see-more-button\"\n      >\n        {numOfListToDisplay === 5 ? \"SEE MORE\" : \"SHOW LESS\"}\n      </SeeMoreBtn>\n    </Container>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { getArtistAlbums } from \"../../../services/spotify/artists\";\nimport { Card } from \"../../common/Card\";\nimport { CardGroup } from \"../../common/CardGroup\";\n\nexport const SectionsOfCards = ({ title, artistID, seeAllLink }) => {\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    getArtistAlbums(artistID, \"album,single,compilation\", \"MY\", 8).then((res) =>\n      setData(res.data.items)\n    );\n  }, [artistID]);\n  return (\n    <CardGroup title={title} seeAllLink={seeAllLink}>\n      {data.map((datum, i) => (\n        <Card\n          data={datum}\n          type={datum.type}\n          key={i}\n          subtitleTypes={[\"releaseYear\", \"typeName\"]}\n          testId=\"discography-album-item\"\n        />\n      ))}\n    </CardGroup>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { PlaceHolderImg } from \"../../../common/PlaceHolderImg\";\n\nconst ProfileImg = styled.div`\n  overflow: hidden;\n  display: flex;\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  align-items: center;\n  > * {\n    position: absolute;\n    top: -70%;\n    width: 100%;\n    height: auto;\n    z-index: 1;\n  }\n  &::before {\n    content: \"\";\n    background-color: rgba(0, 0, 0, 0.26);\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 2;\n  }\n`;\n\nconst TextContent = styled.div`\n  z-index: 3;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n\n  .Header-about-title {\n    font-size: 0.75em;\n    color: hsla(0, 0%, 100%, 0.7);\n    letter-spacing: 1px;\n  }\n  .Header-display-name {\n    font-size: 5.2em;\n    font-weight: 900;\n    word-spacing: 8px;\n    letter-spacing: -3px;\n  }\n`;\nconst Container = styled.div`\n  display: flex;\n  padding-top: 172px;\n`;\nexport const ArtistHeader = ({ data }) => {\n  return (\n    <Container>\n      <ProfileImg>\n        {!data.images.length ? (\n          <PlaceHolderImg type={data.type} />\n        ) : (\n          <img src={data.images[0].url} alt={data.name} height=\"100%\" />\n        )}\n      </ProfileImg>\n      <TextContent>\n        <h2 className=\"Header-about-title\">\n          {data.type === \"user\" ? \"PROFILE\" : data.type.toUpperCase()}\n        </h2>\n        <h1 className=\"Header-display-name\">{data.name}</h1>\n      </TextContent>\n    </Container>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Route, useParams, useRouteMatch } from \"react-router-dom\";\nimport { PlayTools } from \"../components/common/playTools\";\nimport { SeeAllRouteHandler } from \"./see-alls/SeeAllRouteHandler\";\nimport { Contents } from \"../components/layout/main/Contents\";\nimport { PopularSongList } from \"../components/layout/main/PopularSongList\";\nimport { SectionsOfCards } from \"../components/layout/main/SectionOfCards\";\nimport {\n  getArtist,\n  getArtistAlbums,\n  getRelatedArtists,\n} from \"../services/spotify/artists\";\nimport { CardGroup } from \"../components/common/CardGroup\";\nimport { Card } from \"../components/common/Card\";\nimport { Header } from \"../components/layout/main/Header/Header\";\nimport { ArtistHeader } from \"../components/layout/main/Header/ArtistHeader\";\nimport { Loading } from \"./Loading\";\n\nexport const Artist = () => {\n  const { path, url } = useRouteMatch();\n\n  const [artistData, setArtistData] = useState({});\n  const [relatedArtists, setRelatedArtists] = useState([]);\n  const [appearsOn, setAppearsOn] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const artistId = useParams().id;\n\n  useEffect(() => {\n    setAppearsOn([]);\n    setRelatedArtists([]);\n    getArtist(artistId).then((res) => {\n      setArtistData(res.data);\n\n      setIsLoading(true);\n      Promise.all([\n        getRelatedArtists(artistId),\n        getArtistAlbums(artistId, \"appears_on\", \"my\", 8),\n      ]).then((arrayRes) => {\n        setRelatedArtists(arrayRes[0].data.artists);\n        setAppearsOn(arrayRes[1].data.items);\n        setIsLoading(false);\n      });\n    });\n  }, [artistId]);\n  return (\n    <div>\n      <Route exact path={url}>\n        {!isLoading ? (\n          <>\n            <Header>\n              <ArtistHeader data={artistData} />\n            </Header>\n            <Contents>\n              <PlayTools uri={artistData.uri} />\n              <PopularSongList artistId={artistId} />\n              <SectionsOfCards\n                title=\"Discography\"\n                artistID={artistData.id}\n                seeAllLink={`${url}/discography`}\n              />\n              <CardGroup title=\"Fans also like\" seeAllLink={`${url}/related`}>\n                {relatedArtists.map(\n                  (artist, i) =>\n                    i < 8 && (\n                      <Card\n                        data={artist}\n                        type=\"artist\"\n                        key={i}\n                        testId=\"related-artist-card\"\n                      />\n                    )\n                )}\n              </CardGroup>\n              <CardGroup title=\"Appears On\">\n                {appearsOn.map(\n                  (album, i) =>\n                    i < 8 && (\n                      <Card\n                        data={album}\n                        type={album.type}\n                        key={i}\n                        subtitleTypes={[\"releaseYear\", \"typeName\"]}\n                        testId=\"appears-on-card\"\n                      />\n                    )\n                )}\n              </CardGroup>\n            </Contents>\n          </>\n        ) : (\n          <Loading />\n        )}\n      </Route>\n      <Route path={`${path}/:dataType`}>\n        <SeeAllRouteHandler id={artistId} />\n      </Route>\n    </div>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { Subititle } from \"../../../common/Subtitle\";\n\nconst ProfileImg = styled.div`\n  overflow: hidden;\n  display: flex;\n  height: 232px;\n  width: 232px;\n  border-radius: 100%;\n  margin-right: 24px;\n  box-shadow: 0 4px 60px rgba(0, 0, 0, 0.5);\n  justify-content: center;\n  > img {\n    object-fit: cover;\n  }\n`;\n\nconst TextContent = styled.div`\n  z-index: 3;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n\n  .Header-about-title {\n    font-size: 0.75em;\n    color: hsla(0, 0%, 100%, 0.7);\n    letter-spacing: 1px;\n  }\n  .Header-display-name {\n    font-size: 5.2em;\n    font-weight: 900;\n    word-spacing: 8px;\n    letter-spacing: -3px;\n  }\n`;\nconst Container = styled.div`\n  display: flex;\n  padding-top: 40px;\n`;\nexport const UserHeader = ({ data }) => {\n  const subtitles = [];\n  if (!!data.playlists.length) {\n    subtitles.push(\n      data.playlists.length +\n        \" Public Playlist\" +\n        (data.playlists.length > 1 ? \"s\" : \"\")\n    );\n  }\n\n  if (!!data.followers.total) {\n    subtitles.push(\n      data.followers.total +\n        \" Follower\" +\n        (data.playlists.length > 1 ? \"s\" : \"\")\n    );\n  }\n\n  if (!!data.following.total) {\n    subtitles.push(data.following.total + \" Following\");\n  }\n  return (\n    <Container>\n      <ProfileImg>\n        <img\n          src={data.images[0].url}\n          alt={data.display_name + \"'s profile pic\"}\n          height=\"100%\"\n          width=\"auto\"\n          data-testid=\"user-page-profile-img\"\n        />\n      </ProfileImg>\n      <TextContent>\n        <h2 className=\"Header-about-title\">\n          {data.type === \"user\" ? \"PROFILE\" : data.type.toUpperCase()}\n        </h2>\n        <h1 className=\"Header-display-name\">{data.display_name}</h1>\n        <Subititle arrayOfText={subtitles} />\n      </TextContent>\n    </Container>\n  );\n};\n","import { spotifyApi } from \"../../api/spotify\";\n\nexport const getPlaylist = (id, fields, market, additional_types) =>\n  spotifyApi.get(\"/playlists/\" + id, {\n    params: {\n      market,\n      fields,\n      additional_types,\n    },\n  });\n\nexport const getPlaylistItems = (id, fields, limit, offset, additional_types) =>\n  spotifyApi.get(\"/playlists/\" + id + \"/tracks\", {\n    params: {\n      fields,\n      limit,\n      offset,\n      additional_types,\n    },\n  });\nexport const getUserPlaylists = (userId, limit, offset) =>\n  spotifyApi.get(\"/users/\" + userId + \"/playlists\", {\n    params: {\n      limit,\n      offset,\n    },\n  });\nexport const getCurrentUserPlaylists = (limit, offset) =>\n  spotifyApi.get(\"/me/playlists\", {\n    params: {\n      limit,\n      offset,\n    },\n  });\n","import { spotifyApi } from \"../../api/spotify\";\n\nexport const follow = (type, ids) =>\n  spotifyApi.put(\n    \"/me/following\",\n    {\n      ids,\n    },\n    {\n      params: {\n        type,\n      },\n    }\n  );\n\nexport const getCurrentUserFollowed = (limit, after, type = \"artist\") =>\n  // as of writing type: \"artist\" is the only one supported\n  spotifyApi.get(\"/me/following\", {\n    params: {\n      type,\n      after,\n      limit,\n    },\n  });\n","import React, { useEffect, useState } from \"react\";\nimport { useParams, useRouteMatch } from \"react-router-dom\";\n\nimport { useUserDataState } from \"../../contexts/userData\";\n\nimport { Contents } from \"../../components/layout/main/Contents\";\nimport { CardGroup } from \"../../components/common/CardGroup\";\nimport { Card } from \"../../components/common/Card\";\nimport { UserHeader } from \"../../components/layout/main/Header/UserHeader\";\nimport { Header } from \"../../components/layout/main/Header/Header\";\n\nimport { getAllGenerator } from \"../../services/generators\";\nimport { getCurrentUserPlaylists } from \"../../services/spotify/playlist\";\nimport { getCurrentUserFollowed } from \"../../services/spotify/follow\";\nimport { getUserData } from \"../../services/spotify/user\";\n\nexport const User = () => {\n  const currentUserData = useUserDataState().data;\n  const [data, setData] = useState({ followig: null, playlists: null });\n  const { id } = useParams();\n  const { url } = useRouteMatch();\n\n  if (!data || data.id !== id) {\n    if (currentUserData.id === id) {\n      setData(currentUserData);\n    } else {\n      getUserData(id).then((res) => {\n        setData(res.data);\n      });\n    }\n  }\n  useEffect(() => {\n    if (data && !data.following) {\n      getCurrentUserFollowed(8).then((res) => {\n        setData((prev) => ({\n          ...prev,\n          following: res.data.artists,\n        }));\n      });\n    }\n    getAllGenerator(\n      (offset, limit) => getCurrentUserPlaylists(limit, offset),\n      (dataCol) => {\n        setData((prev) => ({\n          ...prev,\n          playlists: dataCol.filter((el) => el.owner.id === currentUserData.id),\n        }));\n      }\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentUserData]);\n\n  return (\n    <div>\n      {!!data.following && !!data.playlists && (\n        <>\n          <Header>\n            <UserHeader data={data} />\n          </Header>\n          <Contents>\n            <CardGroup title=\"Public Playlists\" seeAllLink={`${url}/playlists`}>\n              {data.playlists.map(\n                (playlist, i) =>\n                  i < 8 && (\n                    <Card data={playlist} type=\"playlist\" key={i} hideSubs />\n                  )\n              )}\n            </CardGroup>\n            <CardGroup title=\"Following\" seeAllLink={`${url}/following`}>\n              {data.following.items.map((artist, i) => (\n                <Card data={artist} type=\"artist\" key={i} />\n              ))}\n            </CardGroup>\n          </Contents>\n        </>\n      )}\n    </div>\n  );\n};\n","import { spotifyApi } from \"../../api/spotify\";\n\nexport const getUserData = (id) => spotifyApi.get(`/users/${id}`);\n","import { spotifyApi } from \"../../api/spotify\";\n\nexport const getRecommendations = (limit, seed_artists, seed_tracks) =>\n  spotifyApi.get(\"/recommendations\", {\n    params: {\n      limit,\n      seed_tracks,\n      seed_artists,\n    },\n  });\n","import styled from \"@emotion/styled\";\nimport React, { useEffect, useState } from \"react\";\nimport { CardGroup } from \"../components/common/CardGroup\";\nimport { Card } from \"../components/common/Card\";\nimport { getDataFromUris } from \"../services/general\";\nimport { getAllGenerator } from \"../services/generators\";\nimport { getRecentlyPlayed } from \"../services/spotify/player\";\nimport { getUserTopArtists } from \"../services/spotify/artists\";\nimport { getRecommendations } from \"../services/spotify/browse\";\n\nconst Container = styled.div`\n  margin-top: 58px;\n`;\nconst ContentContainer = styled.div`\n  padding: 24px 32px;\n`;\n\nexport const Home = () => {\n  const [recentlyPlayedSongs, setrecentlyPlayedSongs] = useState(null);\n  const [recentlyPlayedContexts, setRecentlyPlayedContexts] = useState(null);\n  const [topArtist, setTopArtist] = useState(null);\n  const [recomendedSongs, setRecomendedSongs] = useState(null);\n\n  useEffect(() => {\n    getAllGenerator(\n      (offset, limit) => {\n        if (offset === 0) {\n          // because we are using before offset and getAllGenerator put 0 as the default offset\n          offset = null;\n        }\n        return getRecentlyPlayed(limit, offset);\n      },\n      (data) => setrecentlyPlayedSongs(data)\n    );\n  }, []);\n\n  useEffect(() => {\n    if (!!recentlyPlayedSongs) {\n      let uris = [];\n      recentlyPlayedSongs.forEach(\n        (item) => item.context && uris.push(item.context.uri)\n      );\n      // get all recently played Context Uri\n      uris = uris.filter((item, i) => uris.indexOf(item) === i);\n      getDataFromUris(uris, setRecentlyPlayedContexts);\n    }\n  }, [recentlyPlayedSongs]);\n\n  useEffect(() => {\n    getUserTopArtists(5).then((res) => setTopArtist(res.data));\n  }, []);\n\n  useEffect(() => {\n    if (!!topArtist && !!recentlyPlayedSongs) {\n      const seedArtists = topArtist.items\n        .map((item) => item.id)\n        .splice(0, 3)\n        .join(\",\");\n      const seedTracks = recentlyPlayedSongs\n        .map((item) => item.track.id)\n        .splice(Math.floor(Math.random(recentlyPlayedSongs.length)), 2)\n        .join(\",\");\n      getRecommendations(8, seedArtists, seedTracks).then((res) =>\n        setRecomendedSongs(res.data)\n      );\n    }\n  }, [recentlyPlayedSongs, topArtist]);\n\n  return (\n    <Container>\n      <ContentContainer>\n        {console.log(recentlyPlayedSongs)}\n        {!!recentlyPlayedContexts && (\n          <CardGroup title=\"Recently Played\">\n            {recentlyPlayedContexts.map(({ data }, i) => (\n              <Card data={data} type={data.type} key={i} />\n            ))}\n          </CardGroup>\n        )}\n        {!!recomendedSongs && (\n          <CardGroup title=\"Recommended\">\n            {recomendedSongs.tracks.map(({ album }, i) => (\n              <Card data={album} type={album.type} key={i} />\n            ))}\n          </CardGroup>\n        )}\n      </ContentContainer>\n    </Container>\n  );\n};\n","import { spotifyApi } from \"../api/spotify\";\n\nexport const getRecentPlayedUri = (callback, api, path, limit) => {\n  api\n    .get(path, {\n      params: {\n        limit,\n      },\n    })\n    .then((res) => {\n      const uriList = [];\n\n      res.data.items.forEach((item) => {\n        if (\n          !!item.context &&\n          !uriList.some((arrayItem) => arrayItem === item.context.uri)\n        ) {\n          uriList.push(item.context.uri);\n        }\n      });\n      callback(uriList);\n    });\n};\nexport function getDataFromUris(uris, callback) {\n  const queries = uris.map((item) => {\n    const params = item.split(\":\");\n    return () => spotifyApi.get(`/${params[1]}s/${params[2]}`);\n  });\n\n  Promise.all(queries.map((fn) => fn()))\n    .then((res) => {\n      callback(res);\n    })\n    .catch((err) => console.log(err));\n}\nexport function populateUriArray(arr, callback, api) {\n  const queries = arr.map((item) => {\n    const params = item.split(\":\");\n    return () => api.get(`/${params[1]}s/${params[2]}`);\n  });\n\n  Promise.all(queries.map((fn) => fn()))\n    .then((res) => {\n      callback(res);\n    })\n    .catch((err) => console.log(err));\n}\n\nexport function getData(api, path, callback, params) {\n  api\n    .get(path, { params })\n    .then((res) => callback(res.data))\n    .catch((err) => console.log(err));\n}\n","import styled from \"@emotion/styled\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Subititle } from \"../../../common/Subtitle\";\n\nconst ProfileImg = styled.div`\n  overflow: hidden;\n  display: flex;\n  height: 232px;\n  width: 232px;\n  margin-right: 24px;\n  box-shadow: 0 4px 60px rgba(0, 0, 0, 0.5);\n  justify-content: center;\n  > img {\n    object-fit: cover;\n  }\n`;\n\nconst TextContent = styled.div`\n  z-index: 3;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n\n  .Header-about-title {\n    font-size: 0.75em;\n    color: hsla(0, 0%, 100%, 0.7);\n    letter-spacing: 1px;\n  }\n`;\nconst Container = styled.div`\n  display: flex;\n  padding-top: 40px;\n`;\n\nconst Name = styled.h1`\n  font-size: 5.2em;\n  font-weight: 900;\n  word-spacing: 8px;\n  letter-spacing: -3px;\n  ${({ scaleFont }) =>\n    scaleFont &&\n    `\n  font-size: 2.6em;\n  letter-spacing: 0;\n  word-spacing: -3px;\n  font-weight: 700;\n  `}\n`;\nexport const PlaylistHeader = ({ data }) => {\n  let isShouldUpdate = useRef(false);\n  const subtitles = [];\n  const [nameHeight, setNameHeight] = useState(0);\n\n  useEffect(() => {\n    if (!isShouldUpdate.current) {\n      setNameHeight(document.querySelector(\"#playlist-name\").offsetHeight);\n    }\n  }, []);\n\n  return (\n    <Container>\n      <ProfileImg>\n        <img\n          src={data.images[0].url}\n          alt={data.name + \"'s profile pic\"}\n          height=\"100%\"\n          width=\"auto\"\n          data-testid=\"playlist-cover-img\"\n        />\n      </ProfileImg>\n      <TextContent>\n        <h2 className=\"Header-about-title\">{data.type.toUpperCase()}</h2>\n        <Name id=\"playlist-name\" scaleFont={nameHeight > 124}>\n          {data.name}\n        </Name>\n        <Subititle arrayOfText={[data.description]} />\n        <Subititle arrayOfText={subtitles} />\n      </TextContent>\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { List } from \"../components/common/List\";\nimport { ListHeader } from \"../components/common/ListHeader\";\nimport { PlayTools } from \"../components/common/playTools\";\nimport { Contents } from \"../components/layout/main/Contents\";\nimport { Header } from \"../components/layout/main/Header/Header\";\nimport { PlaylistHeader } from \"../components/layout/main/Header/PlaylistHeader\";\nimport { getAllGenerator } from \"../services/generators\";\nimport { play } from \"../services/spotify/player\";\nimport { getPlaylist, getPlaylistItems } from \"../services/spotify/playlist\";\nimport { Loading } from \"./Loading\";\n\nconst LoadingList = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 16px 0;\n`;\n\nexport const Playlist = () => {\n  const playlistId = useParams().id;\n  const [playlistData, setPlaylistData] = useState(null);\n\n  useEffect(() => {\n    const fields = [\n      \"tracks\",\n      \"id\",\n      \"description\",\n      \"followers(total)\",\n      \"images\",\n      \"name\",\n      \"owner\",\n      \"type\",\n      \"uri\",\n    ];\n    getPlaylist(playlistId, fields.join(\",\")).then((res) =>\n      setPlaylistData(res.data)\n    );\n  }, [playlistId]);\n\n  useEffect(() => {\n    if (\n      !!playlistData &&\n      playlistData.tracks.items.length < playlistData.tracks.total\n    ) {\n      getAllGenerator(\n        (offset, limit) => getPlaylistItems(playlistId, null, limit, offset),\n        (items) =>\n          setPlaylistData((prev) => ({\n            ...prev,\n            tracks: {\n              ...prev.tracks,\n              items: [...prev.tracks.items, ...items],\n            },\n          })),\n        [],\n        null,\n        playlistData.tracks.items.length,\n        100\n      );\n    }\n  }, [playlistData, playlistId]);\n\n  return (\n    <>\n      {!playlistData ? (\n        <Loading />\n      ) : (\n        <div>\n          <Header>\n            <PlaylistHeader data={playlistData} />\n          </Header>\n          <Contents>\n            <PlayTools uri={playlistData.uri} />\n            <ListHeader />\n\n            {playlistData.tracks.items.map((track, i) => (\n              <List\n                trackData={track.track}\n                num={i}\n                clickFunction={() =>\n                  play(playlistData.uri, null, { position: i })\n                }\n                key={i}\n                showArtist\n                testId=\"playlist-track-list-item-name\"\n              />\n            ))}\n            {playlistData.tracks.items.length < playlistData.tracks.total && (\n              <LoadingList>Loading...</LoadingList>\n            )}\n          </Contents>\n        </div>\n      )}\n    </>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Card } from \"../../components/common/Card\";\nimport { CardGroup } from \"../../components/common/CardGroup\";\nimport { Contents } from \"../../components/layout/main/Contents\";\nimport { useUserDataState } from \"../../contexts/userData\";\nimport { searchHistoryLocalStorageService } from \"../../utils/localStorageService\";\n\nexport const RecommendedSearch = () => {\n  const [searchHistory, setSearchHistory] = useState(null);\n  const userData = useUserDataState().data;\n\n  useEffect(() => {\n    setSearchHistory(\n      searchHistoryLocalStorageService.getSearchHistory(userData.id)\n    );\n  }, [userData.id]);\n  return (\n    <div>\n      {!!searchHistory && (\n        <Contents>\n          {console.log(searchHistory)}\n          {!!searchHistory.length && (\n            <CardGroup title=\"Recent Searches\" freeHeight>\n              {searchHistory.map((obj, i) => (\n                <Card data={obj} type={obj.type} key={i} />\n              ))}\n            </CardGroup>\n          )}\n        </Contents>\n      )}\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { useParams, useRouteMatch } from \"react-router-dom\";\nimport { Card } from \"../../components/common/Card\";\nimport { CardGroup } from \"../../components/common/CardGroup\";\nimport { List } from \"../../components/common/List\";\nimport { SectionHeader } from \"../../components/common/SectionHeader\";\nimport { Contents } from \"../../components/layout/main/Contents\";\nimport { useUserDataState } from \"../../contexts/userData\";\nimport { play } from \"../../services/spotify/player\";\nimport { searchSpotify } from \"../../services/spotify/Search\";\nimport { searchHistoryLocalStorageService } from \"../../utils/localStorageService\";\n\nexport const SearchResult = () => {\n  const { query } = useParams();\n  const { url } = useRouteMatch();\n  const userData = useUserDataState().data;\n\n  const [tracks, setTracks] = useState(null);\n  const [artists, setArtists] = useState(null);\n  const [albums, setAlbums] = useState(null);\n  const [playlists, setPlaylists] = useState(null);\n\n  useEffect(() => {\n    searchSpotify(query).then((res) => {\n      setArtists(res.data.artists.items);\n      setAlbums(res.data.albums.items);\n      setPlaylists(res.data.playlists.items);\n      setTracks(res.data.tracks.items);\n    });\n  }, [query]);\n\n  useEffect(() => {}, []);\n  const addToSearchHistory = (userId, data) => {\n    console.log(\"added to history\");\n    searchHistoryLocalStorageService.addItemToHistory(userId, data);\n  };\n  return (\n    <div>\n      <Contents>\n        {!!tracks && (\n          <div>\n            <SectionHeader title=\"Tracks\" seeAllLink={url + \"/tracks\"} />\n            {tracks.map(\n              (track, i) =>\n                i < 4 && (\n                  <List\n                    trackData={track}\n                    clickFunction={() => play(null, [track.uri])}\n                    key={i}\n                    isMini\n                  />\n                )\n            )}\n          </div>\n        )}\n        {!!artists && (\n          <CardGroup title={\"Artists\"} seeAllLink={url + \"/artists\"}>\n            {artists.map((artist, i) => (\n              <Card\n                className=\"searchHistory-event\"\n                data={artist}\n                type=\"artist\"\n                key={i}\n                onClickCallback={() => addToSearchHistory(userData.id, artist)}\n              />\n            ))}\n          </CardGroup>\n        )}\n        {!!albums && (\n          <CardGroup title={\"Albums\"} seeAllLink={url + \"/albums\"}>\n            {albums.map((album, i) => (\n              <Card\n                data={album}\n                type=\"album\"\n                key={i}\n                onClickCallback={() => addToSearchHistory(userData.id, album)}\n              />\n            ))}\n          </CardGroup>\n        )}\n        {!!playlists && (\n          <CardGroup title=\"Playlists\" seeAllLink={url + \"/playlists\"}>\n            {playlists.map((playlist, i) => (\n              <Card\n                data={playlist}\n                type=\"album\"\n                key={i}\n                onClickCallback={() =>\n                  addToSearchHistory(userData.id, playlist)\n                }\n              />\n            ))}\n          </CardGroup>\n        )}\n      </Contents>\n    </div>\n  );\n};\n","import { spotifyApi } from \"../../api/spotify\";\n\nexport const searchSpotify = (\n  q,\n  type = \"album,artist,playlist,track\",\n  limit = 8,\n  offset = 0,\n  market = \"MY\"\n) =>\n  spotifyApi.get(\"/search\", {\n    params: {\n      q,\n      type,\n      market,\n      limit,\n      offset,\n    },\n  });\n","import styled from \"@emotion/styled\";\nimport React, { useEffect } from \"react\";\nimport { Route, Switch, useRouteMatch } from \"react-router-dom\";\nimport { RecommendedSearch } from \"./RecommendedSearch\";\nimport { SearchResult } from \"./SearchResult\";\n\nconst Container = styled.div`\n  margin-top: 58px;\n`;\n\nexport const SearchPage = () => {\n  // const clearInput = ()\n  const { url } = useRouteMatch();\n\n  useEffect(() => {}, []);\n  return (\n    <Container>\n      <Switch>\n        <Route exact path={url} component={RecommendedSearch} />\n        <Route path={url + \"/:query\"} component={SearchResult} />\n      </Switch>\n    </Container>\n  );\n};\n","import React, { useEffect } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { Contents } from \"../components/layout/main/Contents\";\nimport { SectionHeader } from \"../components/common/SectionHeader\";\nimport { getCurrentPlayback } from \"../services/spotify/player\";\n\nconst Container = styled.div`\n  margin-top: 58px;\n  h4 {\n    color: #b3b3b3;\n  }\n`;\n\nconst Warning = styled.p`\n  position: absolute;\n  top: 50%;\n  left: 0;\n  right: 0;\n  text-align: center;\n`;\nexport const Queue = () => {\n  useEffect(() => {\n    getCurrentPlayback().then((res) => console.log(res));\n  }, []);\n  return (\n    <Container>\n      <Contents>\n        <SectionHeader title=\"Queue\" />\n        <div>\n          {/* Now Playing */}\n          <h4>Now Playing</h4>\n        </div>\n        <div>\n          <h4>Next from:</h4>\n\n          {/* Next */}\n        </div>\n        <Warning>\n          <strong>Attention</strong>: Queue is not ready due to the spotify api\n          limitations.\n        </Warning>\n      </Contents>\n    </Container>\n  );\n};\n","import React from \"react\";\n\nexport const NoCollectionsSign = ({ about }) => {\n  return <div>There is No {about}</div>;\n};\n","import React, { useEffect, useState } from \"react\";\nimport { getUserSavedAlbum } from \"../../services/spotify/album\";\nimport { NoCollectionsSign } from \"./NoCollectionsSign\";\nimport { Card } from \"../../components/common/Card\";\nimport { CardGroup } from \"../../components/common/CardGroup\";\nimport { getAllGenerator } from \"../../services/generators\";\nimport { Loading } from \"../Loading\";\n\nexport const AlbumLibrary = () => {\n  const [userAlbums, setUserAlbums] = useState(null);\n\n  useEffect(() => {\n    getAllGenerator(\n      (offset, limit) => getUserSavedAlbum(limit, offset),\n      (data) => setUserAlbums(data)\n    );\n  }, []);\n  return (\n    <>\n      {userAlbums === null ? (\n        <Loading />\n      ) : (\n        <div>\n          <CardGroup title=\"Albums\" freeHeight>\n            {!userAlbums.length ? (\n              <NoCollectionsSign about={\"Albums\"} />\n            ) : (\n              userAlbums.map(({ album }, i) => (\n                <Card\n                  data={album}\n                  type=\"album\"\n                  key={i}\n                  testId=\"library-album-card\"\n                />\n              ))\n            )}\n          </CardGroup>\n        </div>\n      )}\n    </>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { getAllGeneratorWithIdOffset } from \"../../services/generators\";\nimport { getCurrentUserFollowed } from \"../../services/spotify/follow\";\nimport { Card } from \"../../components/common/Card\";\nimport { CardGroup } from \"../../components/common/CardGroup\";\nimport { NoCollectionsSign } from \"./NoCollectionsSign\";\nimport { Loading } from \"../Loading\";\n\nexport const ArtistsLibrary = () => {\n  const [userArtists, setuserArtists] = useState(null);\n\n  useEffect(() => {\n    getAllGeneratorWithIdOffset(\n      (offset, limit) => getCurrentUserFollowed(limit, offset),\n      (data) => setuserArtists(data)\n    );\n  }, []);\n\n  return (\n    <>\n      {userArtists === null ? (\n        <Loading />\n      ) : (\n        <div>\n          <CardGroup title=\"Artists\" freeHeight>\n            {!userArtists.length ? (\n              <NoCollectionsSign about={\"Artists\"} />\n            ) : (\n              userArtists.map((playlist, i) => (\n                <Card\n                  data={playlist}\n                  type=\"artists\"\n                  key={i}\n                  testId=\"library-artist-card\"\n                />\n              ))\n            )}\n          </CardGroup>\n        </div>\n      )}\n    </>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { getCurrentUserPlaylists } from \"../../services/spotify/playlist\";\nimport { Card } from \"../../components/common/Card\";\nimport { CardGroup } from \"../../components/common/CardGroup\";\nimport { getAllGenerator } from \"../../services/generators\";\nimport { NoCollectionsSign } from \"./NoCollectionsSign\";\nimport { Loading } from \"../Loading\";\n\nexport const PlaylistLibrary = () => {\n  const [userPlaylists, setuserPlaylists] = useState(null);\n\n  useEffect(() => {\n    getAllGenerator(\n      (offset, limit) => getCurrentUserPlaylists(limit, offset),\n      (data) => {\n        setuserPlaylists(data);\n      }\n    );\n  }, []);\n\n  return (\n    <>\n      {userPlaylists === null ? (\n        <Loading />\n      ) : (\n        <div>\n          <CardGroup title=\"Playlists\" freeHeight>\n            {!userPlaylists.length ? (\n              <NoCollectionsSign about={\"Playlists\"} />\n            ) : (\n              userPlaylists.map((playlist, i) => (\n                <Card\n                  data={playlist}\n                  type=\"playlist\"\n                  key={i}\n                  testId=\"library-playlist-card\"\n                />\n              ))\n            )}\n          </CardGroup>\n        </div>\n      )}\n    </>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { Redirect, Route, Switch, useRouteMatch } from \"react-router-dom\";\nimport { Contents } from \"../../components/layout/main/Contents\";\nimport { AlbumLibrary } from \"./AlbumLibrary\";\nimport { ArtistsLibrary } from \"./ArtistsLibrary\";\nimport { PlaylistLibrary } from \"./PlaylistLibrary\";\nimport { NoMatch } from \"../NoMatch\";\n\nconst Container = styled.div`\n  margin-top: 58px;\n`;\nexport const Library = () => {\n  const { url } = useRouteMatch();\n\n  return (\n    <Container>\n      <Contents>\n        <Switch>\n          <Route exact path={url}>\n            <Redirect to={url + \"/playlists\"} />\n          </Route>\n          <Route path={url + \"/playlists\"} component={PlaylistLibrary} />\n          <Route path={url + \"/artists\"} component={ArtistsLibrary} />\n          <Route path={url + \"/albums\"} component={AlbumLibrary} />\n          <Route component={NoMatch} />\n        </Switch>\n      </Contents>\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Scrollbars } from \"react-custom-scrollbars\";\n\nconst Container = styled.div`\n  overflow-y: scroll;\n  overflow-x: hidden;\n  margin-right: -${({ scrollbarWidth }) => scrollbarWidth}px;\n  height: 100%;\n\n  .track-vertical {\n    top: 2px;\n    bottom: 2px;\n    right: 2px;\n    border-radius: 3px;\n\n    .thumb-vertical {\n      background-color: hsla(0, 0%, 100%, 0.3);\n\n      &:hover {\n        background-color: hsla(0, 0%, 100%, 0.5);\n      }\n    }\n  }\n`;\nexport const ScrollBar = ({ children, onScrollCallback }) => {\n  const renderThumb = ({ style, ...props }) => {\n    const customStyle = {};\n    return (\n      <div\n        {...props}\n        style={{ ...style, ...customStyle }}\n        className=\"thumb-vertical\"\n      />\n    );\n  };\n\n  const renderTrack = ({ style, ...props }) => {\n    const customStyle = {\n      width: \"12px\",\n    };\n    return (\n      <div\n        {...props}\n        style={{ ...style, ...customStyle }}\n        className=\"track-vertical\"\n      />\n    );\n  };\n\n  const [scrollbarWidth, setScrollbarWidth] = useState(0);\n  const scrollContainer = useRef(null);\n\n  useEffect(() => {\n    if (scrollContainer.current) {\n      setScrollbarWidth(\n        scrollContainer.current.offsetWidth -\n          scrollContainer.current.clientWidth\n      );\n    }\n  }, []);\n  return (\n    <Container ref={scrollContainer} scrollbarWidth={scrollbarWidth}>\n      <Scrollbars\n        renderThumbVertical={renderThumb}\n        renderTrackVertical={renderTrack}\n        autoHide\n        onScroll={onScrollCallback}\n      >\n        {children}\n      </Scrollbars>\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\n\nconst ButtonStyled = styled.button`\n  ${({ isIcon, iconScale, isActive, isDisabled }) =>\n    isIcon\n      ? `\n  width: 24px;\n  height: 24px;\n  padding: 4px;\n  box-sizing: content-box;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #b3b3b3;\n  display: inline-block;\n  > svg {\n    width: 100%;\n    height: 100%;\n    color: inherit;\n    ${!!iconScale ? `transform: scale(${iconScale});` : \"\"}\n    ${!!isActive ? `color: #1db954;` : \"\"}\n  }\n  ${\n    !!isDisabled\n      ? `\n  cursor: default;\n  > svg {\n    color: #535353;\n  }\n  `\n      : \"\"\n  }\n\n  &:hover {\n    color: #fff;\n    > svg {\n      color: #fff;\n    ${!!isActive ? `color: #1ed760;` : \"\"}\n    }\n  }\n\n      `\n      : `\n  font-size: 0.82em;\n  font-weight: 700;\n  color: #333;\n  letter-spacing: 0.1em;\n  background-color: #fff;\n  padding: 10px 38px;\n  border-radius: 100px;\n  cursor: pointer;\n  &:hover {\n    transform: scale(1.06);\n  }`}\n`;\n\nexport const Button = ({\n  children,\n  to,\n  isIcon,\n  iconScale,\n  isActive,\n  isDisabled,\n  ...rest\n}) => {\n  return (\n    <>\n      {to ? (\n        <a href={to}>\n          <ButtonStyled\n            {...rest}\n            isIcon={isIcon}\n            iconScale={iconScale}\n            isActive={isActive}\n            isDisabled={isDisabled}\n          >\n            {children}\n          </ButtonStyled>\n        </a>\n      ) : (\n        <ButtonStyled\n          {...rest}\n          isIcon\n          iconScale={iconScale}\n          isActive={isActive}\n          isDisabled={isDisabled}\n        >\n          {children}\n        </ButtonStyled>\n      )}\n    </>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { Button } from \"../components/common/Button\";\nimport { Contents } from \"../components/layout/main/Contents\";\n\nconst Container = styled.div`\n  padding-top: 158px;\n  text-align: center;\n  display: flex;\n  justify-content: center;\n\n  height: 100%;\n  h1 {\n    font-size: 3.2em;\n    margin-bottom: 24px;\n  }\n  .NotLoginPage-btn-wrapper {\n    margin-top: 24px;\n  }\n`;\n\nexport const NotLoginPage = () => {\n  return (\n    <Container>\n      <Contents>\n        <h1>Welcome to Halkim's Spotify Clone</h1>\n        <p>\n          To enjoy its features you must be login first using your existing\n          spotify account.\n        </p>\n        <p>\n          <strong>Note:</strong> This app require user to have spotify Premium\n          account inorder to play music.\n        </p>\n        <div className=\"NotLoginPage-btn-wrapper\">\n          <Button to=\"/auth/login\" aria-label=\"login\">\n            LOG IN\n          </Button>\n        </div>\n      </Contents>\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\n\nimport { Route, Switch } from \"react-router-dom\";\nimport { useUserDataState } from \"../../../contexts/userData\";\nimport { Album } from \"../../../pages/Album\";\nimport { Artist } from \"../../../pages/Artist\";\nimport { User } from \"../../../pages/User/User\";\nimport { NoMatch } from \"../../../pages/NoMatch\";\nimport { Home } from \"../../../pages/Home\";\nimport { Playlist } from \"../../../pages/Playlist\";\nimport { SearchPage } from \"../../../pages/Search/SearchPage\";\nimport { Queue } from \"../../../pages/Queue\";\nimport { Library } from \"../../../pages/Collections/Library\";\nimport { ScrollBar } from \"../../common/ScrollBar\";\nimport { NotLoginPage } from \"../../../pages/NotLoginPage\";\n\nconst Container = styled.div`\n  position: fixed;\n  left: 232px; // FOR SIDEBAR\n  top: 0;\n  right: 0;\n  bottom: 90px;\n`;\n\nexport const MainContent = () => {\n  const userData = useUserDataState().data;\n\n  const changeBackgroundOpacity = (opacityValue, className) => {\n    const elementDom = document.querySelector(\".\" + className);\n    elementDom.style.backgroundColor = \"rgba(0,0,0,\" + opacityValue + \")\";\n  };\n  const stickify = (className) => {\n    const element = document.querySelector(\".\" + className);\n    const elementSensor = document.querySelector(\".sticky-sensor\");\n\n    if (element && elementSensor) {\n      if (elementSensor.getBoundingClientRect().top <= 58) {\n        element.style.position = \"fixed\";\n        element.style.top = \"58px\";\n        element.style.left = \"232px\";\n        element.style.right = \"0px\";\n        element.style.padding = \"6px 56px\";\n        element.style.background = \"#181818\";\n        element.style.zIndex = \"7\";\n      } else {\n        element.style.position = \"\";\n        element.style.top = \"\";\n        element.style.left = \"\";\n        element.style.right = \"\";\n        element.style.padding = \"\";\n        element.style.background = \"\";\n        element.style.zIndex = \"\";\n      }\n    }\n  };\n  const darkenTopMenu = (scrollValue, className) => {\n    if (scrollValue < 100) {\n      const opacityValue = scrollValue / 100;\n      changeBackgroundOpacity(opacityValue, className);\n    } else if (scrollValue > 100) {\n      changeBackgroundOpacity(1, className);\n    }\n  };\n\n  return (\n    <Container className=\"main-content-scroll-event\">\n      <ScrollBar\n        onScrollCallback={(e) => {\n          darkenTopMenu(e.currentTarget.scrollTop, \"top-container\");\n          stickify(\"sticky-list-header\");\n        }}\n      >\n        {!!userData ? (\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route path=\"/user/:id\" component={User} />\n            <Route path=\"/album/:id\" component={Album} />\n            <Route path=\"/artist/:id\" component={Artist} />\n            <Route path=\"/playlist/:id\" component={Playlist} />\n            <Route path=\"/search\" component={SearchPage} />\n            <Route path=\"/collections\" component={Library} />\n            <Route path=\"/queue\" component={Queue} />\n            <Route component={NoMatch} />\n          </Switch>\n        ) : (\n          <NotLoginPage />\n        )}\n      </ScrollBar>\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { getIdFromUri } from \"../../../../utils/spotifyHelper\";\nimport { CommafyArtist } from \"../../../common/CommafyArtists\";\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst Info = styled.div`\n  margin: 0 14px;\n  span {\n    line-height: 0.75em;\n    font-weight: 400;\n    font-size: 0.875em;\n    &:hover {\n    }\n  }\n  > *:last-of-type {\n    span {\n      font-size: 0.8em;\n    }\n  }\n  a:hover {\n    span {\n      color: #fff;\n    }\n  }\n`;\n\nconst ImgContainer = styled.div`\n  width: 56px;\n  height: 56px;\n  img {\n    width: 100%;\n    height: 100%;\n  }\n`;\n\nconst NameContainer = styled.div``;\n\nexport const CurrentPlayingInfo = ({ album, trackName, artists }) => {\n  return (\n    <Container>\n      <ImgContainer>\n        <img src={album.images[1].url} alt=\"\" />\n      </ImgContainer>\n      <Info>\n        <NameContainer>\n          <Link to={\"/album/\" + getIdFromUri(album.uri)}>\n            <span>{trackName}</span>\n          </Link>\n        </NameContainer>\n        <div>\n          <CommafyArtist artistArray={artists} />\n        </div>\n      </Info>\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport {\n  MdPause,\n  MdPlayArrow,\n  MdSkipNext,\n  MdSkipPrevious,\n} from \"react-icons/md\";\nimport { BiShuffle } from \"react-icons/bi\";\nimport { IoIosRepeat } from \"react-icons/io\";\n\nimport {\n  next,\n  pause,\n  play,\n  previous,\n  repeat,\n  shuffle,\n} from \"../../../../services/spotify/player\";\nimport { Button } from \"../../../common/Button\";\n\nconst Container = styled.div`\n  margin-bottom: 10px;\n`;\n\nconst PlaybackControlWrapper = styled.div`\n  width: 224px;\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst RepeatBtnWrapper = styled.div`\n  ${({ mode }) => {\n    let str = \"\";\n    if (mode > 0) {\n      str += `\n    svg {\n      fill: #1db954 !important;\n    }\n    > *:hover {\n      svg {\n        fill: #1ed760 !important;\n      }\n    }\n    `;\n    }\n\n    if (mode === 2) {\n      str += `\n      > * {\n        position: relative;\n        &::before {\n          color: #000;\n          content: \"1\";\n          position: absolute;\n          right: 2px;\n          top: 2px;\n          line-height: 6px;\n          padding: 3px 3px 2px 1px;\n          width: 6px;\n          font-size: 8px;\n          font-weight: 800;\n          border-radius: 50%;\n          background-color: #1db954;\n          border: 2px solid #282828;\n        }\n        &:hover::before {\n          background-color: #1ed760;\n        }\n      }\n      `;\n    }\n\n    return str;\n  }}\n`;\n\nconst CircleBtnWrapper = styled.div`\n  border: 1px solid;\n  border-radius: 50%;\n  display: flex;\n  &:hover {\n    transform: scale(1.14);\n  }\n`;\nexport const Controls = ({\n  isPaused,\n  isShuffled,\n  repeatMode,\n  nextTracks = [],\n  prevTracks = [],\n}) => {\n  return (\n    <Container>\n      <PlaybackControlWrapper>\n        {/* SHUFFLE */}\n        <div>\n          <Button\n            onClick={() => shuffle(!isShuffled)}\n            iconScale={0.74}\n            isActive={isShuffled}\n            isIcon\n            aria-label=\"shuffle\"\n          >\n            <BiShuffle />\n          </Button>\n        </div>\n\n        {/* PREVIOUS */}\n        <div>\n          <Button\n            onClick={() => !!prevTracks.length && previous()}\n            isDisabled={!prevTracks.length}\n            isIcon\n            aria-label=\"previous\"\n          >\n            <MdSkipPrevious />\n          </Button>\n        </div>\n\n        {/* PLAY PAUSE */}\n        <CircleBtnWrapper>\n          {isPaused ? (\n            <Button\n              className=\"play-pause-btn\"\n              onClick={() => play()}\n              isIcon\n              aria-label=\"play\"\n            >\n              <MdPlayArrow />\n            </Button>\n          ) : (\n            <Button\n              className=\"play-pause-btn\"\n              onClick={pause}\n              isIcon\n              aria-label=\"pause\"\n            >\n              <MdPause />\n            </Button>\n          )}\n        </CircleBtnWrapper>\n\n        {/* NEXT */}\n        <div>\n          <Button\n            onClick={() => !!nextTracks.length && next()}\n            isIcon\n            isDisabled={!nextTracks.length}\n            aria-label=\"next\"\n          >\n            <MdSkipNext />\n          </Button>\n        </div>\n\n        {/* REPEAT */}\n        <RepeatBtnWrapper mode={repeatMode}>\n          <Button\n            onClick={() => repeat(repeatMode + 1)}\n            isIcon\n            aria-label=\"repeat\"\n          >\n            <IoIosRepeat />\n          </Button>\n        </RepeatBtnWrapper>\n      </PlaybackControlWrapper>\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\n\nconst Wrapper = styled.div`\n  flex: 1;\n  margin: 0 8px;\n  padding: 6px 0;\n\n  &:hover {\n    .progress-bar {\n      background-color: #1db954;\n    }\n  }\n`;\nconst ProgressBarBg = styled.div`\n  background-color: #535353;\n  height: 4px;\n  border-radius: 50px;\n  position: relative;\n  overflow: hidden;\n`;\nconst ProgressBar = styled.div`\n  background-color: #b3b3b3;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  border-radius: 50px;\n  ${({ progress }) => `width: ${progress}%`}\n`;\n\nexport const Slider = ({ progress, endCallback, dragCalback, testId }) => {\n  const [sliderState, setSliderState] = useState({ progress });\n\n  const isDrag = useRef(false);\n  const seekValue = useRef(progress || 0);\n  const currentElement = useRef();\n  useEffect(() => {\n    setSliderState({ progress });\n  }, [progress]);\n\n  const dragStartHandler = useCallback(\n    (e) => {\n      if (isDrag.current) {\n        seekValue.current = Math.floor(\n          ((e.pageX - currentElement.current.offsetLeft) /\n            currentElement.current.offsetWidth) *\n            100\n        );\n        if (seekValue.current > 100) {\n          seekValue.current = 100;\n        }\n        if (seekValue.current < 0) {\n          seekValue.current = 0;\n        }\n\n        dragCalback && dragCalback(seekValue.current);\n\n        setSliderState({ progress: seekValue.current });\n      }\n    },\n    [dragCalback]\n  );\n\n  const dragEndHandler = useCallback(\n    (e) => {\n      if (isDrag.current) {\n        endCallback(seekValue.current);\n        setSliderState({ progress: seekValue.current });\n      }\n      isDrag.current = false;\n      document.removeEventListener(\"mousemove\", dragStartHandler, false);\n    },\n    [dragStartHandler, endCallback]\n  );\n\n  // useEffect(() => {\n  // }, [dragEndHandler]);\n\n  return (\n    <Wrapper\n      onMouseDown={(e) => {\n        isDrag.current = true;\n        dragStartHandler(e);\n        document.addEventListener(\"mouseup\", dragEndHandler, true);\n        document.addEventListener(\"mousemove\", dragStartHandler, false);\n      }}\n      ref={currentElement}\n      data-testid={testId}\n    >\n      <ProgressBarBg>\n        <ProgressBar progress={sliderState.progress} className=\"progress-bar\" />\n      </ProgressBarBg>\n    </Wrapper>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"@emotion/styled\";\n\nimport { seek } from \"../../../../services/spotify/player\";\nimport { Slider } from \"../../../common/Slider\";\nimport { getMMSSfromMilisec } from \"../../../../utils/spotifyHelper\";\n\nconst Container = styled.div`\n  display: flex;\n  width: 100%;\n  align-items: center;\n  font-size: 11px;\n  span {\n    color: #b3b3b3;\n  }\n`;\n\nexport const PlaybackBar = ({\n  trackPosition,\n  trackDuration,\n  isPlaying,\n  timestamp,\n}) => {\n  const [progressTime, setProgressTime] = useState(trackPosition);\n\n  useEffect(() => {\n    setProgressTime(trackPosition);\n  }, [trackPosition, timestamp]); // include timestamp for rerender even when trackPosition value is the same\n\n  useEffect(() => {\n    let intervalId = null;\n    if (isPlaying) {\n      intervalId = setInterval(() => {\n        if (trackPosition < trackDuration) {\n          setProgressTime((prev) => prev + 1000);\n        }\n      }, 1000);\n    }\n\n    return () => clearInterval(intervalId);\n  }, [trackPosition, isPlaying, trackDuration]);\n\n  const updatePlaybackPosition = (position) => {\n    const seekPosition = Math.floor(trackDuration * (position / 100));\n    seek(seekPosition);\n  };\n\n  function updateProgressTime(position) {\n    const seekPosition = Math.floor(trackDuration * (position / 100));\n\n    setProgressTime(seekPosition);\n  }\n\n  return (\n    <Container>\n      <span>{getMMSSfromMilisec(progressTime)}</span>\n      <Slider\n        progress={(progressTime / trackDuration) * 100}\n        endCallback={updatePlaybackPosition}\n        dragCalback={updateProgressTime}\n        key={trackDuration}\n        testId=\"playback-position-slider\"\n      />\n\n      <span>{getMMSSfromMilisec(trackDuration)}</span>\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { FiVolume1, FiVolume2, FiVolumeX } from \"react-icons/fi\";\nimport { RiPlayList2Fill } from \"react-icons/ri\";\n\nimport { Button } from \"../../../common/Button\";\nimport { setPlayerVolume } from \"../../../../services/spotify/player\";\nimport { Slider } from \"../../../common/Slider\";\nimport { volumeLocalStorageService } from \"../../../../utils/localStorageService\";\nimport { useUserDataState } from \"../../../../contexts/userData\";\n\nconst Container = styled.div`\n  display: flex;\n  > * {\n    display: flex;\n  }\n`;\nconst VolumeControl = styled.div`\n  width: 125px;\n  align-items: center;\n  > *:last-of-type {\n    margin: 0;\n  }\n`;\n\nexport const ExtraControls = ({ deviceId }) => {\n  const userData = useUserDataState().data;\n  const [volumePercentage, setVolumePercentage] = useState(\n    userData ? volumeLocalStorageService.getVolume(userData.id) : 100\n  );\n  const [volumeCache, setvolumeCache] = useState(volumePercentage);\n\n  useEffect(() => {\n    if (!!userData) {\n      setPlayerVolume(volumeLocalStorageService.getVolume(userData.id));\n    }\n  }, [userData]);\n\n  const toggleMute = () => {\n    if (volumePercentage === 0) {\n      setPlayerVolume(volumeCache);\n      volumeLocalStorageService.setVolume(userData.id, volumeCache);\n      setVolumePercentage(volumeLocalStorageService.getVolume(userData.id));\n    } else {\n      setvolumeCache(volumePercentage);\n      setPlayerVolume(0);\n      setVolumePercentage(0);\n    }\n  };\n\n  return (\n    <Container>\n      <div>\n        <Link to=\"/queue\">\n          <Button isIcon iconScale=\".7\" aria-label=\"queue\">\n            <RiPlayList2Fill />\n          </Button>\n        </Link>\n      </div>\n      <VolumeControl>\n        <Button\n          isIcon\n          iconScale=\".8\"\n          onClick={toggleMute}\n          aria-label=\"mute toggle\"\n        >\n          {volumePercentage === 0 ? (\n            <FiVolumeX data-testid=\"mute-icon\" />\n          ) : volumePercentage < 50 ? (\n            <FiVolume1 />\n          ) : (\n            <FiVolume2 />\n          )}\n        </Button>\n        <Slider\n          progress={volumePercentage}\n          endCallback={(perc) => {\n            volumeLocalStorageService.setVolume(userData.id, perc);\n            setPlayerVolume(perc);\n          }}\n          dragCalback={(perc) => {\n            setVolumePercentage(perc);\n          }}\n        />\n      </VolumeControl>\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React, { useEffect, useState } from \"react\";\nimport { transferUsersPlayback } from \"../../../services/spotify/player\";\nimport { CurrentPlayingInfo } from \"./player/CurrentPlayingInfo\";\nimport { Controls } from \"./player/Controls\";\nimport { PlaybackBar } from \"./player/PlaybackBar\";\nimport { ExtraControls } from \"./player/ExtraControls\";\nimport { tokenLocalStorageService } from \"../../../utils/localStorageService\";\nimport { SDKInitializer } from \"../../../services/spotify/SDKInitializer\";\n\nconst Container = styled.div`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 90px;\n  padding: 17px 16px;\n  background-color: #282828;\n  display: flex;\n  > * {\n    display: flex;\n  }\n`;\n\nconst Left = styled.div`\n  justify-content: flex-start;\n  width: 30%;\n`;\nconst Middle = styled.div`\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n  width: 40%;\n`;\nconst Right = styled.div`\n  justify-content: flex-end;\n  width: 30%;\n  align-items: center;\n`;\n\nexport const BottomContainer = () => {\n  const [playback, setPlayback] = useState({\n    position: null,\n    duration: 0,\n    track_window: {\n      current_track: null,\n    },\n    device: {\n      volume_percent: 100,\n    },\n  });\n  const [sdkIsAlreadyInit, setsdkIsAlreadyInit] = useState(false);\n  const [deviceId, setdeviceId] = useState(\"\");\n\n  const setID = (id) => {\n    transferUsersPlayback([id]);\n    setdeviceId(id);\n  };\n\n  const currentTrack = playback.track_window.current_track;\n\n  useEffect(() => {\n    if (!sdkIsAlreadyInit) {\n      SDKInitializer(\n        tokenLocalStorageService.getAccessToken(),\n        setID,\n        (state) => {\n          setPlayback((prev) => ({ ...prev, ...state }));\n          setsdkIsAlreadyInit(true);\n        }\n      );\n    }\n  }, [sdkIsAlreadyInit]);\n  return (\n    <>\n      <Container>\n        <Left>\n          {!!currentTrack && (\n            <CurrentPlayingInfo\n              album={currentTrack.album}\n              trackName={currentTrack.name}\n              artists={currentTrack.artists}\n            />\n          )}\n        </Left>\n        <Middle>\n          <Controls\n            isShuffled={playback.shuffle}\n            isPaused={\n              typeof playback.paused === \"undefined\" ? true : playback.paused\n            }\n            repeatMode={playback.repeat_mode}\n            prevTracks={playback.track_window.previous_tracks}\n            nextTracks={playback.track_window.next_tracks}\n          />\n          <PlaybackBar\n            trackPosition={playback.position}\n            trackDuration={playback.duration}\n            isPlaying={\n              typeof playback.paused === \"undefined\" ? false : !playback.paused\n            }\n            timestamp={playback.timestamp}\n          />\n        </Middle>\n        <Right>\n          <ExtraControls deviceId={deviceId} />\n        </Right>\n      </Container>\n    </>\n  );\n};\n","export const SDKInitializer = (token, setId, onPlayerStateChange) => {\n  async function waitForSpotifyWebPlaybackSDKToLoad() {\n    return new Promise((resolve) => {\n      if (window.Spotify) {\n        resolve(window.Spotify);\n      } else {\n        window.onSpotifyWebPlaybackSDKReady = () => {\n          resolve(window.Spotify);\n        };\n      }\n    });\n  }\n  (async () => {\n    const { Player } = await waitForSpotifyWebPlaybackSDKToLoad();\n\n    const player = new Player({\n      name: \"Halkim's spotify player\",\n      volume: 1.0,\n      getOAuthToken: (cb) => {\n        cb(token);\n      },\n    });\n\n    // Error handling\n    player.addListener(\"initialization_error\", ({ message }) => {\n      console.error(message);\n    });\n\n    player.addListener(\"authentication_error\", ({ message }) => {\n      console.error(message);\n    });\n\n    player.addListener(\"account_error\", ({ message }) => {\n      console.error(message);\n    });\n\n    player.addListener(\"playback_error\", ({ message }) => {\n      console.error(message);\n    });\n\n    // Playback status updates\n\n    // Ready\n    player.addListener(\"ready\", ({ device_id }) => {\n      setId(device_id);\n      console.log(\"playBack ready\");\n    });\n\n    // Not Ready\n    player.addListener(\"not_ready\", ({ device_id }) => {\n      console.log(\"Device ID has gone offline\", device_id);\n    });\n    player.addListener(\"player_state_changed\", onPlayerStateChange);\n\n    // Connect to the player!\n    let connected = await player.connect();\n\n    if (connected) {\n      console.log(\"sdk is connected\");\n    }\n  })();\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { ImSpotify } from \"react-icons/im\";\nimport { VscHome } from \"react-icons/vsc\";\nimport { IoIosSearch } from \"react-icons/io\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nconst Container = styled.nav`\n  width: 100%;\n  margin-top: 24px;\n`;\nconst LogoWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  height: 45px;\n  padding-left: 24px;\n  margin-bottom: 18px;\n  > * {\n    margin-top: -2px;\n  }\n`;\nconst Logo = styled.span`\n  font-size: 2.6em;\n  margin-right: 5px;\n`;\nconst LogoName = styled.span`\n  font-weight: 600;\n  font-size: 1.56em;\n  letter-spacing: -1px;\n  margin-top: -3px;\n`;\nconst NavClickable = styled.div`\n  padding: 4px 16px;\n  opacity: 0.7;\n  transition: opacity 0.2s ease, background-color 0.2s ease;\n  border-radius: 4px;\n  font-weight: 600;\n  &:hover {\n    opacity: 1;\n  }\n  ${({ isActive }) =>\n    isActive &&\n    `\n  background-color: #282828;\n  opacity: 1;\n\n  `}\n`;\n\nconst IconAndTextAligner = styled.div`\n  display: flex;\n  align-items: center;\n  > * {\n    line-height: 1em;\n  }\n`;\nconst IconWrapper = styled.span`\n  font-size: 1.8em;\n  margin-right: 16px;\n`;\nconst LinkName = styled.span`\n  font-size: 0.8em;\n`;\nconst NavList = styled.ul`\n  padding: 0 8px;\n`;\nexport const Sidebar = () => {\n  const { pathname } = useLocation();\n  const navs = [\n    { name: \"Home\", to: \"/\", icon: <VscHome /> },\n    { name: \"Search\", to: \"/search\", icon: <IoIosSearch /> },\n    {\n      name: \"Your Library\",\n      to: \"/collections\",\n      icon: (\n        <svg\n          viewBox=\"0 0 512 512\"\n          width=\"24\"\n          height=\"24\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            d=\"M311.873 77.46l166.349 373.587-39.111 17.27-166.349-373.587zM64 463.746v-384h42.666v384h-42.666zM170.667 463.746v-384h42.667v384h-42.666z\"\n            fill=\"currentColor\"\n          ></path>\n        </svg>\n      ),\n    },\n  ];\n\n  const appHistory = useHistory();\n\n  const getStatusBasedOnPathname = (str) => {\n    if (str === \"/\") {\n      return str === pathname;\n    }\n    const re = new RegExp(\"^\\\\\" + str);\n    return re.test(pathname);\n  };\n\n  return (\n    <Container>\n      <Link to=\"/\">\n        <LogoWrapper>\n          <IconAndTextAligner>\n            <Logo data-testid=\"spotify-logo\">\n              <ImSpotify />\n            </Logo>\n            <LogoName>Spotify</LogoName>\n          </IconAndTextAligner>\n        </LogoWrapper>\n      </Link>\n\n      <NavList>\n        {navs.map((nav, i) => (\n          <li key={i}>\n            <NavClickable\n              isActive={getStatusBasedOnPathname(nav.to)}\n              onClick={() =>\n                !getStatusBasedOnPathname(nav.to) && appHistory.push(nav.to)\n              }\n            >\n              <IconAndTextAligner>\n                <IconWrapper>{nav.icon}</IconWrapper>\n                <LinkName>{nav.name}</LinkName>\n              </IconAndTextAligner>\n            </NavClickable>\n          </li>\n        ))}\n      </NavList>\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useLocation } from \"react-router-dom/cjs/react-router-dom.min\";\nimport { getAllGenerator } from \"../../../services/generators\";\nimport { getCurrentUserPlaylists } from \"../../../services/spotify/playlist\";\nimport { ScrollBar } from \"../../common/ScrollBar\";\n\nconst Container = styled.div`\n  padding-bottom: 0;\n  margin-top: 24px;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  > * {\n    color: #b3b3b3;\n  }\n  h3 {\n    padding: 6px 24px;\n    font-size: 0.8em;\n  }\n  hr {\n    height: 1px;\n    margin-right: 24px;\n    margin-left: 24px;\n    border-color: #282828;\n  }\n`;\n\nconst ListItem = styled.li`\n  font-size: 0.8em;\n  padding: 0 24px;\n  > * {\n    display: block;\n    padding: 6px 0;\n    &:hover span {\n      color: #fff;\n    }\n  }\n  span {\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    color: #b3b3b3;\n  }\n  ${({ isAtive }) =>\n    isAtive &&\n    `\n  span {\n    color: #fff;\n  }\n  `}\n`;\nconst ListContainer = styled.div`\n  flex: 1;\n  overflow: hidden;\n`;\nexport const PlaylistSidebar = () => {\n  const { pathname } = useLocation();\n\n  const [userPlaylists, setuserPlaylists] = useState([]);\n  const isPathnameContainId = (id) => {\n    id += \"\";\n    if (id === \"/\") {\n      return id === pathname;\n    }\n    const re = new RegExp(id);\n    return re.test(pathname);\n  };\n\n  useEffect(() => {\n    getAllGenerator(\n      (offset, limit) =>\n        getCurrentUserPlaylists(limit, offset).catch((err) => console.log(err)),\n      (data) => setuserPlaylists((prev) => [...prev, ...data])\n    );\n  }, []);\n  return (\n    <Container>\n      <h3>PLAYLISTS</h3>\n      <hr />\n      <ListContainer>\n        <ScrollBar>\n          <ul>\n            {userPlaylists.map((playlist, i) => (\n              <ListItem key={i} isAtive={isPathnameContainId(playlist.id)}>\n                <Link to={\"/playlist/\" + playlist.id}>\n                  <span data-testid=\"playlist-side-nav-item\">\n                    {playlist.name}\n                  </span>\n                </Link>\n              </ListItem>\n            ))}\n          </ul>\n        </ScrollBar>\n      </ListContainer>\n    </Container>\n  );\n};\n","export const premiumAccountUser = {\n  data: {\n    country: \"MY\",\n    display_name: \"User A\",\n    email: \"User_A@email.com\",\n    explicit_content: { filter_enabled: false, filter_locked: false },\n    external_urls: {\n      spotify: \"https://open.spotify.com/user/test-user-id-1\",\n    },\n    followers: { href: null, total: 12 },\n    href: \"https://api.spotify.com/v1/users/test-user-id-1\",\n    id: \"test-user-id-1\",\n    images: [\n      {\n        height: null,\n        url: \"test-user-data-img-url\",\n        width: null,\n      },\n    ],\n    product: \"premium\",\n    type: \"user\",\n    uri: \"spotify:user:test-user-id-1\",\n  },\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { Sidebar } from \"./SideBar\";\nimport { PlaylistSidebar } from \"./PlaylistsSidebar\";\nimport { useUserDataState } from \"../../../contexts/__mocks__/userData\";\n\nconst Container = styled.div`\n  position: fixed;\n  top: 0;\n  bottom: 90px;\n  left: 0;\n  width: 232px;\n  background-color: #000;\n  display: flex;\n  flex-direction: column;\n`;\nexport const LeftContainer = () => {\n  let { data } = useUserDataState();\n\n  return (\n    <Container>\n      <Sidebar />\n\n      {!!data && <PlaylistSidebar />}\n    </Container>\n  );\n};\n","import { premiumAccountUser } from \"../../test/fixtures/userDataObj\";\nexport const useUserDataState = () => premiumAccountUser;\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\n\nconst Container = styled.div`\n  margin-left: 100px;\n\n  ul {\n    display: flex;\n  }\n`;\n\nconst NavItem = styled.li`\n  > a {\n    padding: 8px 16px;\n    margin-right: 8px;\n    font-size: 0.875em;\n    border-radius: 3px;\n    ${({ isActive }) =>\n      isActive &&\n      `\n      background-color: #333;\n      `}\n  }\n`;\nexport const CollectionsNav = () => {\n  const { pathname } = useLocation();\n\n  return (\n    <Container>\n      <nav>\n        <ul>\n          <NavItem isActive={/^\\/collections\\/playlists/.test(pathname)}>\n            <Link to=\"/collections/playlists\">\n              <span>Playlists</span>\n            </Link>\n          </NavItem>\n          <NavItem isActive={/^\\/collections\\/artists/.test(pathname)}>\n            <Link to=\"/collections/artists\">\n              <span>Artists</span>\n            </Link>\n          </NavItem>\n          <NavItem isActive={/^\\/collections\\/albums/.test(pathname)}>\n            <Link to=\"/collections/albums\">\n              <span>Albums</span>\n            </Link>\n          </NavItem>\n        </ul>\n      </nav>\n    </Container>\n  );\n};\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { IoIosArrowBack, IoIosArrowForward } from \"react-icons/io\";\nimport { useHistory } from \"react-router-dom\";\n\nconst CircleButton = styled.button`\n  background: #000;\n  color: #fff;\n  border-radius: 50%;\n  padding: 4px;\n  > svg {\n    display: block;\n    width: 26px;\n    height: 26px;\n  }\n  ${({ isDisabled }) =>\n    isDisabled &&\n    `\n  opacity: .4;\n  `}\n`;\n\nconst BackForwardBtnContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  width: 80px;\n`;\nexport const HistoryManager = () => {\n  const appHistory = useHistory();\n  const { location, goBack, goForward } = appHistory;\n\n  const keys = useRef([location.key]);\n  const previousKey = useRef(location.key);\n  const [currentKeyIndex, setCurrentKeyIndex] = useState(0);\n\n  const updateHistory = useCallback((location, action) => {\n    const { key } = location;\n    if (key === undefined) {\n      setCurrentKeyIndex((prev) => prev - 1);\n      return;\n    }\n\n    if (!keys.current.includes(key)) {\n      if (action === \"REPLACE\" && /^\\/search\\//.test(location.pathname)) {\n        keys.current.splice(keys.current.length - 1, 1, key);\n        setCurrentKeyIndex(keys.current.indexOf(key));\n        return;\n      }\n      keys.current = keys.current.slice(\n        0,\n        keys.current.indexOf(previousKey.current) + 1\n      );\n      keys.current.push(key);\n    }\n    setCurrentKeyIndex(keys.current.indexOf(key));\n    previousKey.current = key;\n  }, []);\n\n  useEffect(() => {\n    appHistory.listen(updateHistory);\n    return () =>\n      appHistory.listen(() => {\n        return;\n      });\n  }, [appHistory, updateHistory]);\n\n  const onClickBack = () => {\n    if (currentKeyIndex !== 0) {\n      goBack();\n    }\n  };\n\n  const onClickForward = () => {\n    if (currentKeyIndex !== keys.current.length - 1 || keys.current.length) {\n      goForward();\n    }\n  };\n\n  return (\n    <BackForwardBtnContainer>\n      <CircleButton\n        data-testid=\"back-btn\"\n        onClick={onClickBack}\n        isDisabled={currentKeyIndex === 0}\n        aria-label=\"go back\"\n      >\n        <IoIosArrowBack />\n      </CircleButton>\n      <CircleButton\n        data-testid=\"forward-btn\"\n        onClick={onClickForward}\n        isDisabled={currentKeyIndex === keys.current.length - 1}\n        aria-label=\"go forward\"\n      >\n        <IoIosArrowForward />\n      </CircleButton>\n    </BackForwardBtnContainer>\n  );\n};\n","import React, { useRef, useState } from \"react\";\nimport { GrClose } from \"react-icons/gr\";\nimport { IoIosSearch } from \"react-icons/io\";\nimport styled from \"@emotion/styled\";\nimport { useHistory, useLocation } from \"react-router-dom\";\n\nconst SearchInput = styled.div`\n  background: #fff;\n  display: flex;\n  position: relative;\n  border-radius: 50px;\n  padding: 6px 48px;\n  width: 364px;\n  margin-left: 14px;\n  > input {\n    border: none;\n    outline: none;\n    line-height: 2em;\n    width: 100%;\n  }\n  > * {\n    color: #000;\n    z-index: 12;\n  }\n  > .search-icon,\n  > .clear-input-btn {\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n    line-height: 0.1em;\n  }\n  > .search-icon {\n    left: 11px;\n    font-size: 2em;\n  }\n  > .clear-input-btn {\n    right: 14px;\n    font-size: 1.2em;\n  }\n`;\n\nexport const SearchBar = () => {\n  const searchInputRef = useRef();\n  const appHistory = useHistory();\n\n  const [isSearchEmpty, setisSearchEmpty] = useState(true);\n  const [query, setQuery] = useState(\"\");\n\n  const { pathname } = useLocation();\n\n  let queryUrl = pathname.split(\"/\")[2];\n\n  const onUserInput = () => {\n    const inputValue = searchInputRef.current.value;\n    if (!inputValue.length) {\n      setisSearchEmpty(true);\n    } else {\n      setisSearchEmpty(false);\n    }\n    setQuery(inputValue);\n  };\n\n  if (queryUrl !== query) {\n    appHistory.replace(\"/search/\" + query);\n  }\n\n  return (\n    <SearchInput>\n      <div className=\"search-icon\">\n        <IoIosSearch />\n      </div>\n      <input\n        type=\"text\"\n        name=\"spotify-search-bar\"\n        id=\"search-bar\"\n        placeholder=\"Search for Artists, songs or Playlists\"\n        ref={searchInputRef}\n        onInput={onUserInput}\n        maxLength=\"80\"\n        value={query}\n        autoFocus\n      />\n      {!isSearchEmpty && (\n        <div className=\"clear-input-btn\">\n          <GrClose />\n        </div>\n      )}\n    </SearchInput>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst Container = styled.div`\n  background-color: #282828;\n  padding: 4px;\n  box-shadow: 0 4px 4px rgba(0, 0, 0, 0.7);\n  border-radius: 4px;\n  z-index: 10;\n`;\n\nconst ListItem = styled.li`\n  &:not(:last-child) {\n    margin-bottom: 4px;\n  }\n`;\nconst ButtonStyled = styled.button`\n  font-size: 0.8em;\n  padding: 14px 8px 10px;\n  display: block;\n  width: 100%;\n  border-radius: 4px;\n  color: hsla(0, 0%, 100%, 0.7);\n  text-align: left;\n  &:hover {\n    color: #fff;\n    background-color: hsla(0, 0%, 100%, 0.1);\n  }\n`;\n\nexport const OverlayMenu = ({ list }) => {\n  return (\n    <Container>\n      <ul>\n        {list.map(({ name, link, exec }, i) => (\n          <ListItem key={i}>\n            {exec ? (\n              <ButtonStyled onClick={exec} aria-label={`${name}`}>\n                {name}\n              </ButtonStyled>\n            ) : (\n              <Link to={link}>\n                <ButtonStyled aria-label={`${name}`}>{name}</ButtonStyled>\n              </Link>\n            )}\n          </ListItem>\n        ))}\n      </ul>\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { IoMdArrowDropdown } from \"react-icons/io\";\nimport { Redirect } from \"react-router-dom\";\nimport { useUserDataState } from \"../../../contexts/userData\";\nimport { logoutUser } from \"../../../services/auth\";\nimport { OverlayMenu } from \"../../common/OverlayMenu\";\n\nconst Container = styled.div`\n  position: relative;\n  color: #fff;\n`;\nconst Pill = styled.div`\n  background-color: rgba(0, 0, 0, 0.7);\n  border-radius: 50px;\n  padding: 2px;\n  padding-right: 6px;\n  cursor: pointer;\n  &:hover {\n    background-color: #282828;\n  }\n  ${({ isActive }) =>\n    isActive &&\n    `\n  background-color: #282828;\n`}\n`;\n\nconst ButtonStyled = styled.button`\n  display: flex;\n  align-items: center;\n  color: #fff;\n  cursor: inherit;\n\n  > span {\n    font-size: 0.8em;\n    font-weight: 700;\n  }\n`;\nconst Figure = styled.figure`\n  height: 30px;\n  width: 30px;\n  margin: 0;\n  padding: 0;\n  border-radius: 100%;\n  overflow: hidden;\n  > img {\n    height: 100%;\n    width: 100%;\n  }\n`;\n\nconst UserName = styled.span`\n  margin: 0 6px;\n`;\nconst IconContainer = styled.span`\n  > * {\n    font-size: 1.8em;\n    margin-bottom: -6px;\n  }\n`;\nconst OverlayStyled = styled.div`\n  position: absolute;\n  top: 125%;\n  right: 0;\n  width: 114%;\n`;\n\nexport const UserDropDown = () => {\n  const [showList, setShowList] = useState(false);\n  const userData = useUserDataState().data;\n  const [userIsLogout, setuserIsLogout] = useState(false);\n\n  const pillRef = useRef();\n\n  const logoutAndGoHome = () => {\n    logoutUser();\n    setuserIsLogout(true);\n  };\n\n  const list = [\n    {\n      name: \"Profile\",\n      link: \"/user/\" + userData.id,\n    },\n    {\n      name: \"Log out\",\n      exec: logoutAndGoHome,\n    },\n  ];\n\n  useEffect(() => {\n    document.addEventListener(\"click\", (e) => {\n      if (!!e.path) {\n        if (!e.path.includes(pillRef.current)) {\n          setShowList(false);\n        }\n      }\n    });\n  }, []);\n\n  return (\n    <Container data-testid=\"user-info\">\n      {userIsLogout && <Redirect to=\"/\" />}\n      <Pill\n        data-testid=\"dropdown-pill\"\n        onClick={() => setShowList(!showList)}\n        isActive={showList}\n        ref={pillRef}\n      >\n        <ButtonStyled aria-label=\"user options\">\n          <Figure>\n            <img src={userData.images[0].url} alt=\"\" />\n          </Figure>\n          <UserName>{userData.display_name}</UserName>\n          <IconContainer>\n            <IoMdArrowDropdown />\n          </IconContainer>\n        </ButtonStyled>\n      </Pill>\n      {showList && (\n        <OverlayStyled data-testid=\"dd-list\">\n          <OverlayMenu list={list} />\n        </OverlayStyled>\n      )}\n    </Container>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { Button } from \"../../common/Button\";\nimport { CollectionsNav } from \"./CollectionsNav\";\nimport { HistoryManager } from \"./HistoryManager\";\nimport { SearchBar } from \"./SearchBar\";\nimport { UserDropDown } from \"./UserDropdown\";\nconst Container = styled.div`\n  padding: 12px 32px;\n  display: flex;\n  position: fixed;\n  align-items: center;\n  top: 0;\n  right: 0;\n  left: 0;\n  justify-content: space-between;\n  z-index: 10;\n  margin-left: 232px; // FOR SIDEBAR\n`;\n\nconst LeftContent = styled.div``;\nconst MiddleContent = styled.div`\n  flex: 1;\n`;\n\nexport const TopContainer = ({ isUserAuthenticated, location }) => {\n  const { pathname } = useLocation();\n  return (\n    <Container className=\"top-container\">\n      <HistoryManager />\n      <MiddleContent>\n        {/^\\/search/.test(pathname) && <SearchBar />}\n        {/^\\/collection/.test(pathname) && <CollectionsNav />}\n      </MiddleContent>\n      <LeftContent>\n        {isUserAuthenticated ? (\n          <UserDropDown />\n        ) : (\n          <Button to=\"/auth/login\" aria-label=\"login\">\n            LOG IN\n          </Button>\n        )}\n      </LeftContent>\n    </Container>\n  );\n};\n","import { ManageData } from \"./components/ManageData\";\nimport { useUserDataState } from \"./contexts/userData\";\nimport { MainContent } from \"./components/layout/main/MainContent\";\nimport styled from \"@emotion/styled\";\nimport { BottomContainer } from \"./components/layout/bottom/BottomContainer\";\nimport { LeftContainer } from \"./components/layout/left/LeftContainer\";\nimport { TopContainer } from \"./components/layout/top/TopContainer\";\n\nconst Container = styled.div``;\n\nfunction App() {\n  const haveUserData = useUserDataState();\n\n  return (\n    <div className=\"App\">\n      <Container>\n        <ManageData>\n          <TopContainer isUserAuthenticated={!!haveUserData.data} />\n          <LeftContainer />\n          <MainContent />\n          <BottomContainer />\n        </ManageData>\n      </Container>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { HashRouter } from \"react-router-dom\";\nimport { UserDataProvider } from \"./contexts/userData\";\n\nReactDOM.render(\n  <HashRouter>\n    <UserDataProvider>\n      <App />\n    </UserDataProvider>\n  </HashRouter>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export const tokenLocalStorageService = (function () {\n  function _setToken(tokenObj) {\n    localStorage.setItem(\"access_token\", tokenObj.access_token);\n    localStorage.setItem(\"refresh_token\", tokenObj.refresh_token);\n  }\n  function _setAccessToken(tokenObj) {\n    localStorage.setItem(\"access_token\", tokenObj.access_token);\n    window.location.reload();\n  }\n  function _getAccessToken() {\n    return localStorage.getItem(\"access_token\");\n  }\n  function _getRefreshToken() {\n    return localStorage.getItem(\"refresh_token\");\n  }\n  function _clearToken() {\n    localStorage.removeItem(\"access_token\");\n    localStorage.removeItem(\"refresh_token\");\n  }\n  return {\n    setToken: _setToken,\n    setAccessToken: _setAccessToken,\n    getAccessToken: _getAccessToken,\n    getRefreshToken: _getRefreshToken,\n    clearToken: _clearToken,\n  };\n})();\n\nexport const searchHistoryLocalStorageService = (function () {\n  function _getSearchHistory(userId) {\n    const data = JSON.parse(\n      localStorage.getItem(`${userId}:fusionSearchHistory`)\n    );\n    if (!data) {\n      return [];\n    }\n    return data;\n  }\n  function _addItemToHistory(userId, data) {\n    const oldData = _getSearchHistory(userId);\n    oldData.forEach((obj, i) => {\n      console.log(obj.id);\n      if (obj.id === data.id) {\n        oldData.splice(i, 1);\n        return;\n      }\n    });\n\n    while (oldData.length > 29) {\n      oldData.pop();\n    }\n    localStorage.setItem(\n      `${userId}:fusionSearchHistory`,\n      JSON.stringify([data, ...oldData])\n    );\n  }\n  function _clearSearchHistory(userId) {\n    localStorage.removeItem(`${userId}:fusionSearchHistory`);\n  }\n  return {\n    getSearchHistory: _getSearchHistory,\n    addItemToHistory: _addItemToHistory,\n    clearSearchHistory: _clearSearchHistory,\n  };\n})();\nexport const volumeLocalStorageService = (function () {\n  function _getVolume(userId) {\n    const data = localStorage.getItem(`${userId}:volumePercentage`);\n    if (!data) {\n      return \"100\";\n    }\n    return data;\n  }\n  function _setVolume(userId, volume) {\n    localStorage.setItem(`${userId}:volumePercentage`, volume + \"\");\n  }\n  return {\n    getVolume: _getVolume,\n    setVolume: _setVolume,\n  };\n})();\n","import axios from \"axios\";\nimport { tokenLocalStorageService } from \"../utils/localStorageService\";\n\nexport const spotifyApi = axios.create({\n  baseURL: \"https://api.spotify.com/v1\",\n  headers: {\n    Accept: \"application/json\",\n  },\n});\nspotifyApi.interceptors.request.use(\n  (config) => {\n    config.headers.common[\"Content-Type\"] = \"application/json\";\n\n    const token = tokenLocalStorageService.getAccessToken();\n    if (token) {\n      config.headers.common[\"Authorization\"] = \"Bearer \" + token;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\nspotifyApi.interceptors.response.use(\n  (response) => response,\n  async (err) => {\n    const originalRequest = err.config;\n\n    if (err.response) {\n      if (\n        err.response.status === 401 &&\n        !originalRequest._retry &&\n        err.message !== \"Network Error\"\n      ) {\n        originalRequest._retry = true;\n        const refreshToken = tokenLocalStorageService.getRefreshToken();\n        await axios\n          .get(\"/auth/refresh_token\", {\n            params: { refresh_token: refreshToken },\n          })\n          .then((res) => {\n            if (res.status === 200) {\n              tokenLocalStorageService.setAccessToken(res.data);\n            }\n          })\n          .catch((err) => console.log(err));\n        return spotifyApi(originalRequest);\n      }\n    }\n    return Promise.reject(err);\n  }\n);\n"],"sourceRoot":""}